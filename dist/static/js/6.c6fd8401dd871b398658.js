webpackJsonp([6],{"2yRD":function(t,e){},"6GsD":function(t,e){},sUKf:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("f4AQ"),r={data:()=>({tableValue:[],clusterData:null,yData:[]}),components:{leftMenu:a("Oj91").a},mounted(){this.axios.get("/server/hclust?username="+this.$store.state.username+"&p="+this.$store.state.projectId).then(t=>{this.clusterData=t.data;for(let e=0;e<t.data.distMatrix.length;e++)for(let a=0;a<t.data.distMatrix[e].length;a++)this.tableValue.push(t.data.distMatrix[e][a]);this.initD3()})},methods:{initD3(){let t=this;!function e(a){null===a.branchset?t.yData.push(a.id):(e(a.branchset[0]),e(a.branchset[1]))}(this.clusterData.rootNode);var e=430,a=(n.scaleOrdinal().domain([0,n.max(t.tableValue)]).range(n.schemeCategory10),n.cluster().size([360,e]).separation(function(t,e){return 1})),r=n.select("#container").append("svg").attr("width",1200).attr("height",900).append("g").attr("transform","translate(0,50)"),s=n.hierarchy(t.clusterData.rootNode,function(t){return t.branchset});a(s);var i=n.select("#show-length input").on("change",h),c=setTimeout(function(){i.property("checked",!0).each(h)},100);!function t(e,a,n){e.radius=(a+=e.data.length)*n;e.children&&e.children.forEach(function(e){t(e,a,n)})}(s,s.data.length=0,e/function t(e){return e.data.length+(e.children?n.max(e.children,t):0)}(s));var l=r.append("g").attr("class","link-extensions").selectAll("path").data(s.links().filter(function(t){return!t.target.children})).enter().append("path").each(function(t){t.target.linkExtensionNode=this}).attr("d",m),o=r.append("g").attr("class","links").selectAll("path").data(s.links()).enter().append("path").each(function(t){t.target.linkNode=this}).attr("d",f),u=r.append("g").attr("class","labels").attr("transform",function(t,a){return"translate("+(e+5)+","+(a+.5)+")"}),d=n.scaleLinear().domain([0,20,40]).range([n.rgb(6,113,160),n.rgb(2,218,150),n.rgb(120,248,232)]);function h(){clearTimeout(c);var t=n.transition().duration(500);l.transition(t).attr("d",this.checked?g:m),o.transition(t).attr("d",this.checked?p:f)}function p(t){return x(t.source.x,t.source.radius,t.target.x,t.target.radius)}function f(t){return x(t.source.x,t.source.y,t.target.x,t.target.y)}function g(t){return x(t.target.x,t.target.radius,t.target.x,e)}function m(t){return x(t.target.x,t.target.y,t.target.x,e)}function x(t,e,a,n){return"M"+e+","+t+(a===t?"":"L"+e+","+a)+"L"+n+","+a}u.selectAll(".nameLabel").data(t.yData).enter().append("text").text(function(t){return t}).attr("x",0).attr("y",function(t,e){return 30*parseInt(e)}).style("text-anchor","start").style("font-size","12px").style("font-family","Consolas, Monaco, monospace").attr("transform","translate(370,16)").attr("class","ySum"),u.selectAll(".score").data(t.tableValue).enter().append("rect").attr("x",function(e,a){return a%t.yData.length*30}).attr("y",function(e,a){return 30*parseInt(a/t.yData.length)}).attr("width",30).attr("height",30).style("fill",function(t){return d(t)}).append("title").text(function(t){return t})}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("leftMenu",{staticStyle:{float:"left",width:"300px","margin-top":"10px"}}),t._v(" "),a("div",{staticClass:"content"},[a("el-breadcrumb",{staticStyle:{margin:"5px 0 50px 0"},attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"report"}}},[t._v("项目"+t._s(t.$store.state.projectName))]),t._v(" "),a("el-breadcrumb-item",[t._v("样本聚类图")])],1),t._v(" "),a("h2",[t._v("样本聚类图")]),t._v(" "),t._m(0),t._v(" "),a("div",{attrs:{id:"container"}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{id:"show-length"}},[e("input",{attrs:{type:"checkbox"}}),this._v(" Show branch length\n    ")])}]};var i=a("VU/8")(r,s,!1,function(t){a("2yRD"),a("6GsD")},"data-v-88e145d0",null);e.default=i.exports}});
//# sourceMappingURL=6.c6fd8401dd871b398658.js.map