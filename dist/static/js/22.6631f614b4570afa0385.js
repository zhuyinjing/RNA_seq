webpackJsonp([22],{"4xrE":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Oj91"),n=a("K0Oa"),i=a("f4AQ"),s={data:()=>({traces:[],tableData:[],barChartArr:[],xData:["总碱基数","核糖体碱基数","编码区碱基数","UTR碱基数","内含子碱基数","基因间区碱基数"]}),components:{leftMenu:r.a,imgMenuShowComp:n.a},mounted(){this.initTable()},methods:{initD3(){let t=this,e=i.select("body").append("div").style("position","absolute").style("z-index","10").style("visibility","hidden").style("font-size","14px").style("font-weight","bold").text(""),a=document.getElementById("d3container").clientWidth;var r=20,n=40,s=a-80-n-50,o=560-r-30,l=i.select("#chart").attr("width",a).attr("height",560).append("g").attr("transform","translate("+n+","+r+")"),c=i.scaleBand().rangeRound([0,s]).paddingInner(.05),d=i.scaleBand().padding(.05),u=i.scaleLinear().rangeRound([o,0]),p=i.scaleOrdinal(i.schemeCategory10),v=this.tableData.map(t=>t[0]);c.domain(this.xData),d.domain(v).rangeRound([0,c.bandwidth()]),u.domain([0,i.max(this.barChartArr,function(t){return i.max(v,function(e){return t[e]})})]).nice();l.append("g").selectAll("g").data(this.barChartArr).enter().append("g").attr("transform",function(t){return"translate("+c(t.name)+",0)"}).selectAll("rect").data(function(t){return v.map(function(e){return{key:e,value:t[e]}})}).enter().append("rect").attr("x",function(t){return d(t.key)}).attr("y",function(t){return u(t.value)}).attr("width",d.bandwidth()).attr("height",function(t){return o-u(t.value)}).attr("fill",function(e){return p(t.$store.state.info.experimentDesign.nameSampleMap[e.key].condition)}).on("mouseover",function(a,r){return e.style("visibility","visible").text(a.key+" : "+t.numFormat(a.value))}).on("mousemove",function(t,a){return e.style("top",i.event.pageY-10+"px").style("left",i.event.pageX+10+"px")}).on("mouseout",function(t,a){return e.style("visibility","hidden")});l.append("g").attr("class","axis").attr("transform","translate(0,"+o+")").call(i.axisBottom(c)),l.append("g").attr("class","axis").call(i.axisLeft(u).ticks(null,"s")).append("text").attr("x",2).attr("y",u(u.ticks().pop())+.5).attr("dy","0.32em").attr("fill","#000").attr("font-weight","bold").attr("text-anchor","start");let h=[];for(let t in this.$store.state.info.experimentDesign.conditionNumMap)h.push(t);var m=l.append("g").attr("font-size",10).selectAll("g").data(h).enter().append("g").attr("transform",function(t,e){return"translate(0,"+16*e+")"});m.append("rect").attr("x",s).attr("width",15).attr("height",15).attr("fill",p),m.append("text").attr("x",s+16).attr("y",8).attr("dy","0.32em").text(function(t){return t})},numFormat(t){for(var e=(t=t.toString().split("."))[0].split("").reverse(),a=[],r=0,n=e.length;r<n;r++)r%3==0&&0!==r&&a.push(","),a.push(e[r]);return a.reverse(),a=t[1]?a.join("").concat("."+t[1]):a.join("")},initTable(){this.axios.get("/server/mappingqc?username="+this.$store.state.username+"&p="+this.$store.state.projectId).then(t=>{this.tableData=t.data.slice(1);let e=[1,3,4,5,6,7];for(let t=0;t<this.xData.length;t++){let a={name:this.xData[t]};for(let r=0;r<this.tableData.length;r++)for(let r=0;r<this.tableData.length;r++){let n=e[t];a[this.tableData[r][0]]=this.tableData[r][n]-0}this.barChartArr.push(a)}this.initD3()})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticStyle:{height:"calc(100% - 62px)","margin-top":"2px"}},[a("el-aside",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.menuShow,expression:"$store.state.menuShow"}],staticStyle:{width:"300px",height:"100%","border-right":"1px solid #e6e6e6"},attrs:{width:"350px;"}},[a("leftMenu",{staticStyle:{"margin-top":"5px"}})],1),t._v(" "),a("el-main",[a("div",{},[a("imgMenuShowComp"),t._v(" "),a("el-breadcrumb",{staticStyle:{margin:"5px 0 50px 0"},attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"report"}}},[t._v("项目 "+t._s(t.$store.state.projectName))]),t._v(" "),a("el-breadcrumb-item",[t._v("比对结果质检")])],1),t._v(" "),a("h2",[t._v("序列比对结果统计图")]),t._v(" "),a("p",[t._v("转录本由基因外显子序列组成，因此转录组测序产生的 reads 理论上应主要回贴到基因外显子（包括 UTR ）区域；同时由于可变剪切事件的存在，部分 reads 会回贴到基因内含子区域；另外可能有少量 reads 会回帖到基因间区。对 reads 基因组回贴位置进行统计，可以辅助判断转录组的测序质量。 我们使用 Hisat2 软件进行基因组回帖比对分析，该软件是是 TopHat2/Bowtie2 的后续更新版本，使用改进的 BWT 算法，实现了更快的速度和更少的资源占用，作者推荐 TopHat2/Bowtie2\n        和 HISAT 的用户转换到 HISAT2 。")]),t._v(" "),a("p",[t._v("参考文献：")]),t._v(" "),a("p",[t._v("Kim D, Langmead B and Salzberg SL. HISAT: a fast spliced aligner with low memory requirements. Nature Methods 2015 ")]),t._v(" "),a("p",[t._v("["),a("a",{attrs:{href:"https://www.nature.com/articles/nmeth.3317"}},[t._v("原文链接")]),t._v("]")]),t._v(" "),a("p",[t._v("如下图所示，横坐标表示各类 reads 回贴位置，纵坐标表示每个细胞中回贴到相应位置的 reads 的数目（纵坐标轴上大写的 G 代表 Billion）。")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-document"},on:{click:function(e){t.$store.commit("d3savePDF","比对结果统计")}}},[t._v("生成 PDF")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-picture"},on:{click:function(e){t.$store.commit("d3saveSVG","比对结果统计")}}},[t._v("生成 SVG")]),t._v(" "),a("div",{},[a("div",{attrs:{id:"d3container"}},[a("svg",{attrs:{id:"chart"}})])]),t._v(" "),a("table",{staticClass:"gridtable"},[a("thead",[a("tr",[a("th",[t._v("样本")]),t._v(" "),a("th",[t._v("总碱基数")]),t._v(" "),a("th",[t._v("核糖体占比")]),t._v(" "),a("th",[t._v("编码区占比")]),t._v(" "),a("th",[t._v("UTR占比")]),t._v(" "),a("th",[t._v("内含子区占比")]),t._v(" "),a("th",[t._v("基因间区占比")])])]),t._v(" "),t._l(t.tableData,function(e,r){return a("tr",[a("td",{class:{bgcolor:r%2!=0}},[t._v(t._s(e[0]))]),t._v(" "),a("td",{class:{bgcolor:r%2!=0}},[t._v(t._s(t.numFormat(e[1])))]),t._v(" "),a("td",{class:{bgcolor:r%2!=0}},[t._v(t._s((100*Number(e[16])).toFixed(1))+"%")]),t._v(" "),a("td",{class:{bgcolor:r%2!=0}},[t._v(t._s((100*Number(e[17])).toFixed(1))+"%")]),t._v(" "),a("td",{class:{bgcolor:r%2!=0}},[t._v(t._s((100*Number(e[18])).toFixed(1))+"%")]),t._v(" "),a("td",{class:{bgcolor:r%2!=0}},[t._v(t._s((100*Number(e[19])).toFixed(1))+"%")]),t._v(" "),a("td",{class:{bgcolor:r%2!=0}},[t._v(t._s((100*Number(e[20])).toFixed(1))+"%")])])})],2)],1),t._v(" "),a("div",{staticClass:"clear"})])],1)},staticRenderFns:[]};var l=a("VU/8")(s,o,!1,function(t){a("Gb70")},"data-v-df9f7936",null);e.default=l.exports},Gb70:function(t,e){}});
//# sourceMappingURL=22.6631f614b4570afa0385.js.map