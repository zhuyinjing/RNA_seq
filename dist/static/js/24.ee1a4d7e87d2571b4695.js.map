{"version":3,"sources":["webpack:///src/components/ASprofile.vue","webpack:///./src/components/ASprofile.vue?25aa","webpack:///./src/components/ASprofile.vue"],"names":["ASprofile","data","events","samples","eventsArr","samplesArr","components","leftMenu","imgMenuShowComp","[object Object]","this","getValue","methods","axios","get","$store","state","username","projectId","then","res","message_type","ASProfileInfo","asName","sampleName","asEventMap","i","length","push","initD3","$message","error","d3","remove","margin","svg","append","attr","arr","filter","value","key","includes","xData","x","domain","rangeRound","padding","y","color","selectAll","enter","d","j","bandwidth","call","style","text","components_ASprofile","render","_vm","_h","$createElement","_c","_self","staticStyle","height","margin-top","directives","name","rawName","expression","width","border-right","attrs","_v","separator","to","path","_s","projectName","for","multiple","placeholder","model","callback","$$v","_l","item","label","type","on","click","$event","id","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/24.ee1a4d7e87d2571b4695.js","sourcesContent":["<template>\n<el-container style=\"height:calc(100% - 62px);margin-top:2px\">\n  <el-aside v-show=\"$store.state.menuShow\" width=\"350px;\" style=\"width:300px;height:100%;border-right:1px solid #e6e6e6\">\n    <leftMenu style=\"margin-top:5px\"></leftMenu>\n  </el-aside>\n  <el-main>\n    <div class=\"\">\n      <imgMenuShowComp></imgMenuShowComp>\n\n      <el-breadcrumb separator=\"/\" style=\"margin:5px 0 50px 0\">\n        <el-breadcrumb-item :to=\"{ path: 'report' }\">项目 {{$store.state.projectName}}</el-breadcrumb-item>\n        <el-breadcrumb-item>ASprofile 分析</el-breadcrumb-item>\n      </el-breadcrumb>\n\n      <h2>ASprofile 分析 </h2>\n\n      <div class=\"\">\n        <label for=\"\">可变剪切事件</label>\n        <el-select v-model=\"events\" multiple placeholder=\"请选择\">\n          <el-option\n            v-for=\"item in eventsArr\"\n            :key=\"item\"\n            :label=\"item\"\n            :value=\"item\">\n          </el-option>\n        </el-select>\n        &nbsp;&nbsp;&nbsp;&nbsp;\n        <label for=\"\">样本</label>\n        <el-select v-model=\"samples\" multiple placeholder=\"请选择\">\n          <el-option\n            v-for=\"(item,key) in samplesArr\"\n            :key=\"item\"\n            :label=\"item\"\n            :value=\"key\">\n          </el-option>\n        </el-select>\n        &nbsp;&nbsp;&nbsp;&nbsp;\n        <el-button type=\"primary\" @click=\"initD3()\">提交</el-button>\n      </div>\n\n      <div id=\"canvas\"></div>\n      <!-- <div id=\"canvas\" style=\"display:inline-block;width:800px\"></div> -->\n\n    </div>\n  </el-main>\n</el-container>\n</template>\n\n<script>\nimport leftMenu from './leftMenu.vue'\nimport imgMenuShowComp from './imgMenuShowComp.vue'\nimport * as d3 from 'd3'\n\nexport default {\n  data() {\n    return {\n      events: [],\n      samples: [],\n      eventsArr: [],\n      samplesArr: [],\n      data: {},\n    }\n  },\n  components: {\n    leftMenu,\n    imgMenuShowComp\n  },\n  mounted() {\n    this.getValue()\n  },\n  methods: {\n    getValue () {\n      this.axios.get('/server/as_profile_info?username=' + this.$store.state.username + '&p=' + this.$store.state.projectId).then((res) => {\n        if (res.data.message_type === 'success') {\n          this.eventsArr = res.data.ASProfileInfo.asName\n          this.samplesArr = res.data.ASProfileInfo.sampleName\n          this.data = res.data.ASProfileInfo.asEventMap\n          // 默认全选\n          this.events = res.data.ASProfileInfo.asName\n          // 存索引\n          for (let i = 0;i < this.samplesArr.length;i++) {\n            this.samples.push(i)\n          }\n          this.initD3()\n        } else {\n          this.$message.error('请求错误!')\n        }\n      })\n    },\n    initD3() {\n      if (this.events.length === 0 || this.samples.length === 0 ) {\n        this.$message.error('请选择可变剪切事件和样本，不能为空！')\n        return\n      }\n      let hassvg = d3.selectAll('svg')\n      if (hassvg) {\n        d3.selectAll('svg').remove()\n      }\n      let width = 800\n      let height = 400\n      let margin = {left: 100, right: 30, top: 30, bottom: 80}\n\n      for (let i = 0;i < this.events.length;i++) {\n        let svg = d3.select('#canvas')\n          .append('svg')\n          .attr('id', 'svg')\n          .attr('width', width)\n          .attr('height', height)\n\n        let arr = this.data[this.events[i]].filter((value, key) => {\n            if (this.samples.includes(key)) {\n                return value\n            }\n        })\n\n        let xData = this.samplesArr.filter((value, key) => {\n            if (this.samples.includes(key)) {\n                return value\n            }\n        })\n        var x = d3.scaleBand()\n          .domain(xData)\n          .rangeRound([margin.left, width - margin.right])\n          .padding(0.5)\n\n        var y = d3.scaleLinear()\n          .domain([0, d3.max(arr)])\n          .rangeRound([height - margin.bottom, margin.top]);\n\n        var color = d3.scaleOrdinal(d3.schemeCategory10);\n\n        svg.append(\"g\")\n          .selectAll(\"g\")\n          .data(arr)\n          .enter().append(\"g\")\n          .attr(\"fill\", (d, j) => {\n            return color(i)\n          })\n          .selectAll(\"rect\")\n          .data(arr)\n          .enter().append(\"rect\")\n          .attr(\"width\", x.bandwidth)\n          .attr(\"x\", (d, i) => {\n            return x(xData[i])\n          })\n          .attr(\"y\", (d) => {\n            return y(d)\n          })\n          .attr(\"height\", (d) => {\n            return y(0) - y(d)\n          })\n        //   .on(\"mouseover\", function(d) {\n        //     d3.select(this)\n        //     showtext.attr(\"x\", d3.select(this).attr(\"x\") - 0 + 15)\n        //       .attr(\"y\", d3.select(this).attr(\"y\"))\n        //       .text(function() {\n        //         return d\n        //       })\n        //       .attr(\"text-anchor\", \"middle\")\n        //   })\n        //   .on(\"mouseout\", function() {\n        //     d3.select(this)\n        //     showtext.text(\"\")\n        //   })\n        //\n        // //添加左侧提示部分包裹层\n        // let showtext = svg.append(\"text\")\n        //   .text(\"\")\n        //   .attr(\"font-size\", '14px')\n\n        svg.append(\"g\")\n          .attr(\"transform\", \"translate(0,\" + y(0) + \")\")\n          .call(d3.axisBottom(x))\n          .selectAll(\"text\")\n          .style(\"text-anchor\", \"start\")\n          .attr(\"transform\", \"rotate(45 -10 10)\");\n\n        svg.append(\"g\")\n          .attr(\"transform\", \"translate(\" + margin.left + \",0)\")\n          .call(d3.axisLeft(y))\n          .append('text')\n          .text(this.events[i])\n          .style(\"font-size\", \"16px\")\n          .attr('fill', '#000')\n          .attr('transform', 'translate(' + 0 + ', 25)')\n\n        function stackMin(serie) {\n          return d3.min(serie, function(d) {\n            return d[0];\n          });\n        }\n\n        function stackMax(serie) {\n          return d3.max(serie, function(d) {\n            return d[1];\n          });\n        }\n      }\n\n    },\n  }\n}\n</script>\n\n<style scoped=\"true\">\n.content {\n  float: left;\n  width: calc(100% - 350px);\n  padding: 0 20px;\n  margin: 19px auto;\n}\n\n.cursor-pointer {\n  cursor: pointer;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/ASprofile.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',{staticStyle:{\"height\":\"calc(100% - 62px)\",\"margin-top\":\"2px\"}},[_c('el-aside',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.$store.state.menuShow),expression:\"$store.state.menuShow\"}],staticStyle:{\"width\":\"300px\",\"height\":\"100%\",\"border-right\":\"1px solid #e6e6e6\"},attrs:{\"width\":\"350px;\"}},[_c('leftMenu',{staticStyle:{\"margin-top\":\"5px\"}})],1),_vm._v(\" \"),_c('el-main',[_c('div',{},[_c('imgMenuShowComp'),_vm._v(\" \"),_c('el-breadcrumb',{staticStyle:{\"margin\":\"5px 0 50px 0\"},attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: 'report' }}},[_vm._v(\"项目 \"+_vm._s(_vm.$store.state.projectName))]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"ASprofile 分析\")])],1),_vm._v(\" \"),_c('h2',[_vm._v(\"ASprofile 分析 \")]),_vm._v(\" \"),_c('div',{},[_c('label',{attrs:{\"for\":\"\"}},[_vm._v(\"可变剪切事件\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"multiple\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.events),callback:function ($$v) {_vm.events=$$v},expression:\"events\"}},_vm._l((_vm.eventsArr),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})})),_vm._v(\"\\n            \\n        \"),_c('label',{attrs:{\"for\":\"\"}},[_vm._v(\"样本\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"multiple\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.samples),callback:function ($$v) {_vm.samples=$$v},expression:\"samples\"}},_vm._l((_vm.samplesArr),function(item,key){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":key}})})),_vm._v(\"\\n            \\n        \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.initD3()}}},[_vm._v(\"提交\")])],1),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"canvas\"}})],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-49c77e7c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ASprofile.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-49c77e7c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ASprofile.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ASprofile.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ASprofile.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-49c77e7c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ASprofile.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-49c77e7c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ASprofile.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}