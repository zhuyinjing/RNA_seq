{"version":3,"sources":["webpack:///src/components/upload_file.vue","webpack:///./src/components/upload_file.vue?f917","webpack:///./src/components/upload_file.vue"],"names":["upload_file","data","sample_name","message","progress","currentItem","fileObj","disabled","components","[object Object]","this","getFile","methods","axios","get","$store","state","username","projectId","then","res","$refs","file1","files","file2","$message","error","formData","FormData","append","config","onUploadProgress","progressEvent","complete","loaded","total","post","message_type","success","item","value","$confirm","confirmButtonText","cancelButtonText","type","center","name","catch","$router","push","components_upload_file","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","effect","content","placement","on","click","backProjectList","_v","placeholder","change","$event","model","callback","$$v","expression","_l","key","ref","upload","percentage","_m","_s","fileList","file","deleteFile","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/21.a0d5423f46b7ea417bdd.js","sourcesContent":["<template>\n  <div class=\"content\">\n    <el-tooltip class=\"item cursor-pointer\" effect=\"dark\" content=\"返回\" placement=\"right\">\n      <i class=\"el-icon-back\" @click=\"backProjectList\"></i>\n    </el-tooltip>\n    <div class=\"margin-top-10\">\n      <span class=\"p-font-style\">样本数据：</span>\n        <el-select v-model=\"sample_name\" placeholder=\"请选择\" @change=\"change()\" :disabled=\"disabled\">\n          <el-option v-for=\"item in message.nameSampleMap\" :key=\"item.name\" :value=\"item.name\"></el-option>\n        </el-select>\n    </div>\n      <div class=\"fileDivStyle\">\n        <span class=\"p-font-style\">文件1:</span>\n        <input type=\"file\" name=\"\" ref=\"file1\">\n      </div>\n      <div class=\"fileDivStyle\">\n        <span class=\"p-font-style\">文件2:</span>\n        <input type=\"file\" name=\"\" ref=\"file2\">\n      </div>\n      <el-button type=\"primary\" @click=\"upload()\" :disabled=\"disabled\">上 传</el-button>\n      <p class=\"p-font-style\">上传进度：</p>\n      <el-progress :percentage=\"progress\"></el-progress>\n    <div class=\"\">\n      <p class=\"p-font-style\">实验条件一览</p>\n      <table class=\"gridtable\">\n        <tr>\n            <th>样本名称</th><th>fastq 文件</th>\n        </tr>\n        <tr v-for=\"item in message.nameSampleMap\">\n            <td>{{item.name}}</td>\n            <td>\n              <p v-for=\"fileList in item.readPairList\">\n                <span v-for=\"file in fileList\">{{file}} &nbsp;&nbsp;</span>\n                <i class=\"el-icon-delete cursor-pointer icon-style\" @click=\"deleteFile(item, fileList)\"></i>\n              </p>\n            </td>\n        </tr>\n      </table>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      sample_name: '',\n      message: {},\n      progress: 0,\n      currentItem: null,\n      fileObj: {},\n      disabled: false\n    }\n  },\n  components: {\n  },\n  mounted () {\n    this.getFile()\n  },\n  methods: {\n    getFile () {\n      this.axios.get('/server/experiment?username=' + this.$store.state.username + '&p=' + this.$store.state.projectId).then((res) => {\n        if (!res.data.message) {\n          this.message = {}\n        } else {\n          this.message = res.data.message\n        }\n      })\n    },\n    upload () {\n      if (!this.$refs.file1.files[0] && !this.$refs.file2.files[0]) {\n        this.$message.error('请选择要上传的文件!');\n        return\n      }\n      if (!this.$refs.file1.files[0] || !this.$refs.file2.files[0]) {\n        this.$message.error('请上传两个文件!');\n        return\n      }\n      if (!this.sample_name) {\n        this.$message.error('请选择样本数据!');\n        return\n      }\n      this.disabled = true\n      let formData = new FormData()\n      formData.append('username', this.$store.state.username)\n      formData.append('p', this.$store.state.projectId)\n      formData.append('sample_name', this.sample_name)\n      formData.append('r1', this.$refs.file1.files[0])\n      formData.append('r2', this.$refs.file2.files[0])\n      let config = {\n        onUploadProgress: progressEvent => {\n          let complete = (progressEvent.loaded / progressEvent.total * 100 | 0)\n          this.progress = complete\n        }\n      }\n      this.axios.post('/server/upload_rnaseq_paired_fastq', formData, config).then((res) => {\n        if (res.data.message_type === 'success') {\n          this.disabled = false\n          this.$message.success('上传成功!');\n          this.getFile()\n        }\n      })\n    },\n    change (item) {\n      this.$refs.file1.value = ''\n      this.$refs.file2.value  = ''\n      this.progress = 0\n      this.disabled = false\n    },\n    deleteFile (item, fileObj) {\n      this.currentItem = item\n      this.fileObj = fileObj\n      this.$confirm('此操作将永久删除该样本的fastq文件, 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning',\n          center: true\n        }).then(() => {\n          let formData = new FormData()\n          formData.append('username', this.$store.state.username)\n          formData.append('p', this.$store.state.projectId)\n          formData.append('sample_name', this.currentItem.name)\n          formData.append('r1', this.fileObj['r1'])\n          formData.append('r2', this.fileObj['r2'])\n          this.axios.post('/server/delete_rnaseq_paired_fastq',formData).then((res) => {\n            if (res.data.message_type === 'success') {\n              this.getFile()\n              this.$message.success('删除成功！');\n            } else {\n              this.$message.error('删除失败！');\n            }\n          })\n        }).catch(() => {});\n    },\n    backProjectList () {\n      this.$router.push({'name': 'project_list'})\n    }\n  }\n}\n</script>\n\n<style scoped=\"true\">\n.content {\n  width: 60%;\n  margin: 19px auto;\n}\ntable.gridtable {\n    width: 100%;\n    text-align: center;\n    font-size:14px;\n    color:#333333;\n    border-width: 1px;\n    border-color: #ebeef5;\n    border-collapse: collapse;\n}\ntable.gridtable th {\n    color: #333;\n    border-width: 1px;\n    padding: 8px;\n    border-style: solid;\n    border-color: #ebeef5;\n}\ntable.gridtable td {\n    border-width: 1px;\n    padding: 8px;\n    border-style: solid;\n    border-color: #ebeef5;\n    background-color: #ffffff;\n}\n.p-font-style{\n  color: #666;\n}\n.cursor-pointer{\n  cursor: pointer;\n}\n.fileDivStyle {\n  margin: 20px 0;\n}\n.right {\n  float: right;\n  width: 60px;\n}\n.item {\n  margin: 4px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.icon-style {\n  color: #f56b6c;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/upload_file.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content\"},[_c('el-tooltip',{staticClass:\"item cursor-pointer\",attrs:{\"effect\":\"dark\",\"content\":\"返回\",\"placement\":\"right\"}},[_c('i',{staticClass:\"el-icon-back\",on:{\"click\":_vm.backProjectList}})]),_vm._v(\" \"),_c('div',{staticClass:\"margin-top-10\"},[_c('span',{staticClass:\"p-font-style\"},[_vm._v(\"样本数据：\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\",\"disabled\":_vm.disabled},on:{\"change\":function($event){_vm.change()}},model:{value:(_vm.sample_name),callback:function ($$v) {_vm.sample_name=$$v},expression:\"sample_name\"}},_vm._l((_vm.message.nameSampleMap),function(item){return _c('el-option',{key:item.name,attrs:{\"value\":item.name}})}))],1),_vm._v(\" \"),_c('div',{staticClass:\"fileDivStyle\"},[_c('span',{staticClass:\"p-font-style\"},[_vm._v(\"文件1:\")]),_vm._v(\" \"),_c('input',{ref:\"file1\",attrs:{\"type\":\"file\",\"name\":\"\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"fileDivStyle\"},[_c('span',{staticClass:\"p-font-style\"},[_vm._v(\"文件2:\")]),_vm._v(\" \"),_c('input',{ref:\"file2\",attrs:{\"type\":\"file\",\"name\":\"\"}})]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.disabled},on:{\"click\":function($event){_vm.upload()}}},[_vm._v(\"上 传\")]),_vm._v(\" \"),_c('p',{staticClass:\"p-font-style\"},[_vm._v(\"上传进度：\")]),_vm._v(\" \"),_c('el-progress',{attrs:{\"percentage\":_vm.progress}}),_vm._v(\" \"),_c('div',{},[_c('p',{staticClass:\"p-font-style\"},[_vm._v(\"实验条件一览\")]),_vm._v(\" \"),_c('table',{staticClass:\"gridtable\"},[_vm._m(0),_vm._v(\" \"),_vm._l((_vm.message.nameSampleMap),function(item){return _c('tr',[_c('td',[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('td',_vm._l((item.readPairList),function(fileList){return _c('p',[_vm._l((fileList),function(file){return _c('span',[_vm._v(_vm._s(file)+\"   \")])}),_vm._v(\" \"),_c('i',{staticClass:\"el-icon-delete cursor-pointer icon-style\",on:{\"click\":function($event){_vm.deleteFile(item, fileList)}}})],2)}))])})],2)])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('tr',[_c('th',[_vm._v(\"样本名称\")]),_c('th',[_vm._v(\"fastq 文件\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-adc02fe8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/upload_file.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-adc02fe8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./upload_file.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./upload_file.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./upload_file.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-adc02fe8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./upload_file.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-adc02fe8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/upload_file.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}