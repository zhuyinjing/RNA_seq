webpackJsonp([18],{GFFQ:function(e,t){},dHaY:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:()=>({sample_name:"",message:{},progress:0,currentItem:null,fileObj:{},disabled:!1}),components:{},mounted(){this.getFile()},methods:{getFile(){this.axios.get("/server/experiment?username="+this.$store.state.username+"&p="+this.$store.state.projectId).then(e=>{e.data.message?this.message=e.data.message:this.message={}})},upload(){if(!this.$refs.file1.files[0]&&!this.$refs.file2.files[0])return void this.$message.error("请选择要上传的文件!");if(!this.$refs.file1.files[0]||!this.$refs.file2.files[0])return void this.$message.error("请上传两个文件!");if(!this.sample_name)return void this.$message.error("请选择样本数据!");this.disabled=!0;let e=new FormData;e.append("username",this.$store.state.username),e.append("p",this.$store.state.projectId),e.append("sample_name",this.sample_name),e.append("r1",this.$refs.file1.files[0]),e.append("r2",this.$refs.file2.files[0]);let t={onUploadProgress:e=>{let t=e.loaded/e.total*100|0;this.progress=t}};this.axios.post("/server/upload_rnaseq_paired_fastq",e,t).then(e=>{"success"===e.data.message_type&&(this.disabled=!1,this.$message.success("上传成功!"),this.getFile())})},change(e){this.$refs.file1.value="",this.$refs.file2.value="",this.progress=0,this.disabled=!1},deleteFile(e,t){this.currentItem=e,this.fileObj=t,this.$confirm("此操作将永久删除该样本的fastq文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(()=>{let e=new FormData;e.append("username",this.$store.state.username),e.append("p",this.$store.state.projectId),e.append("sample_name",this.currentItem.name),e.append("r1",this.fileObj.r1),e.append("r2",this.fileObj.r2),this.axios.post("/server/delete_rnaseq_paired_fastq",e).then(e=>{"success"===e.data.message_type?(this.getFile(),this.$message.success("删除成功！")):this.$message.error("删除失败！")})}).catch(()=>{})},backProjectList(){this.$router.push({name:"project_list"})}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[s("el-tooltip",{staticClass:"item cursor-pointer",attrs:{effect:"dark",content:"返回",placement:"right"}},[s("i",{staticClass:"el-icon-back",on:{click:e.backProjectList}})]),e._v(" "),s("div",{staticClass:"margin-top-10"},[s("span",{staticClass:"p-font-style"},[e._v("样本数据：")]),e._v(" "),s("el-select",{attrs:{placeholder:"请选择",disabled:e.disabled},on:{change:function(t){e.change()}},model:{value:e.sample_name,callback:function(t){e.sample_name=t},expression:"sample_name"}},e._l(e.message.nameSampleMap,function(e){return s("el-option",{key:e.name,attrs:{value:e.name}})}))],1),e._v(" "),s("div",{staticClass:"fileDivStyle"},[s("span",{staticClass:"p-font-style"},[e._v("文件1:")]),e._v(" "),s("input",{ref:"file1",attrs:{type:"file",name:""}})]),e._v(" "),s("div",{staticClass:"fileDivStyle"},[s("span",{staticClass:"p-font-style"},[e._v("文件2:")]),e._v(" "),s("input",{ref:"file2",attrs:{type:"file",name:""}})]),e._v(" "),s("el-button",{attrs:{type:"primary",disabled:e.disabled},on:{click:function(t){e.upload()}}},[e._v("上 传")]),e._v(" "),s("p",{staticClass:"p-font-style"},[e._v("上传进度：")]),e._v(" "),s("el-progress",{attrs:{percentage:e.progress}}),e._v(" "),s("div",{},[s("p",{staticClass:"p-font-style"},[e._v("实验条件一览")]),e._v(" "),s("table",{staticClass:"gridtable"},[e._m(0),e._v(" "),e._l(e.message.nameSampleMap,function(t){return s("tr",[s("td",[e._v(e._s(t.name))]),e._v(" "),s("td",e._l(t.readPairList,function(a){return s("p",[e._l(a,function(t){return s("span",[e._v(e._s(t)+"   ")])}),e._v(" "),s("i",{staticClass:"el-icon-delete cursor-pointer icon-style",on:{click:function(s){e.deleteFile(t,a)}}})],2)}))])})],2)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("th",[this._v("样本名称")]),t("th",[this._v("fastq 文件")])])}]};var r=s("VU/8")(a,i,!1,function(e){s("GFFQ")},"data-v-adc02fe8",null);t.default=r.exports}});
//# sourceMappingURL=18.245a7afda4b79566c3bb.js.map