{"version":3,"sources":["webpack:///src/components/forceGraph.vue","webpack:///./src/components/forceGraph.vue?9152","webpack:///./src/components/forceGraph.vue"],"names":["forceGraph","data","originNodes","singleNodes","graph","singleGeneShow","components","leftMenu","degComp","imgMenuShowComp","[object Object]","this","getValue","methods","axios","get","$store","state","username","projectId","_case","_control","then","res","message_type","message","relevanceGeneNodes","discreteGeneNodes","nodes","links","scoreMatrixList","initD3","$message","error","d3","remove","concat","setTimeout","document","getElementById","clientWidth","svg","append","attr","g","node","link","brush","zoomLayer","width","height","simulation","force","id","d","strength","distanceMax","on","brushMode","metaKey","cleanNodes","keyCode","classed","each","picked","previouslyPicked","extent","selection","zoomProp","x","k","y","call","target","move","zoom","scaleExtent","transform","style","datum","lineScale","range","domain","map","i","value","selectAll","enter","o","currentd","connectedNodeIds","filter","source","c","indexOf","dragstarted","dragged","dragended","texts","text","active","alphaTarget","restart","fx","fy","components_forceGraph","render","_vm","_h","$createElement","_c","_self","staticStyle","margin-top","directives","name","rawName","expression","border-right","attrs","_v","active-color","active-text","inactive-text","change","$event","singleGeneShowChange","model","callback","$$v","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/17.7210d2ba492b95c8e3df.js","sourcesContent":["<template>\n<el-container style=\"height:calc(100% - 62px);margin-top:2px\">\n  <el-aside v-show=\"$store.state.menuShow\" width=\"350px;\" style=\"width:300px;height:100%;border-right:1px solid #e6e6e6\">\n    <leftMenu style=\"margin-top:5px\"></leftMenu>\n  </el-aside>\n  <el-main>\n    <imgMenuShowComp></imgMenuShowComp>\n\n    <degComp></degComp>\n\n    是否显示离散的基因：\n    <el-switch\n      v-model=\"singleGeneShow\"\n      active-color=\"#409EFF\"\n      active-text=\"显示\"\n      inactive-text=\"隐藏\"\n      @change=\"singleGeneShowChange()\"\n    >\n    </el-switch>\n\n    <div id=\"canvas\"></div>\n\n  </el-main>\n</el-container>\n</template>\n\n<script>\nimport leftMenu from './leftMenu.vue'\nimport degComp from './degComp.vue'\nimport imgMenuShowComp from './imgMenuShowComp.vue'\nimport * as d3 from 'd3'\n\nexport default {\n  data() {\n    return {\n      originNodes: null,\n      singleNodes: null,\n      graph: {},\n      singleGeneShow: false,\n    }\n  },\n  components: {\n    leftMenu,\n    degComp,\n    imgMenuShowComp\n  },\n  mounted() {\n    this.getValue()\n  },\n  methods: {\n    getValue () {\n      this.axios.get('/server/deg_effect_of_force_diagram?username=' + this.$store.state.username + '&p=' + this.$store.state.projectId + '&caseSample=' + this.$store.state._case + '&controlSample=' + this.$store.state._control).then((res) => {\n        if (res.data.message_type === 'success') {\n          this.originNodes = res.data.message.relevanceGeneNodes\n          this.singleNodes = res.data.message.discreteGeneNodes\n          this.graph = {\n            \"nodes\": res.data.message.relevanceGeneNodes,\n            \"links\": res.data.message.scoreMatrixList\n          }\n          this.initD3()\n        } else {\n          this.$message.error(res.data.message)\n        }\n      })\n    },\n    singleGeneShowChange () {\n      let hassvg = d3.selectAll('g')\n      if (hassvg) {\n        d3.selectAll('svg').remove()\n      }\n      if (this.singleGeneShow === true) {\n        this.graph.nodes = this.graph.nodes.concat(this.singleNodes)\n      } else {\n        this.graph.nodes = this.originNodes\n      }\n      setTimeout(() => {\n        this.initD3()\n      }, 50)\n    },\n    initD3() {\n      // 屏幕宽度\n      let containerWidth = document.getElementById(\"canvas\").clientWidth\n\n      let svg = d3.select('#canvas')\n        .append('svg')\n        .attr('id', 'svg')\n        .attr('width', 1200)\n        .attr('height', 960)\n      var g,\n        width = +svg.attr(\"width\"),\n        height = +svg.attr(\"height\"),\n        node, link,\n        brushMode, brush, zoomLayer, brushLayer; //intercation canvas: Brush + zoom\n\n      var color = d3.scaleOrdinal(d3.schemeCategory20);\n\n      if (this.singleGeneShow === false) {\n        var simulation = d3.forceSimulation()\n          .force(\"link\", d3.forceLink().id(function(d) {\n            return d.id;\n          }))\n          .force(\"charge\", d3.forceManyBody().strength(-300).distanceMax(300)) // strength 默认 -30\n          .force(\"center\", d3.forceCenter(width / 2, height / 2));\n      } else {\n        var simulation = d3.forceSimulation()\n          .force(\"link\", d3.forceLink().id(function(d) {\n            return d.id;\n          }))\n          .force(\"charge\", d3.forceManyBody().strength(-200).distanceMax(100)) // strength 默认 -30\n          .force(\"center\", d3.forceCenter(width / 2, height / 2));\n      }\n\n      // add shift event\n      d3.select(\"body\")\n        .on(\"keydown\", keydown)\n        .on(\"keyup\", keyup)\n\n      // brushable network: http://jsfiddle.net/pkerpedjiev/29majy5c/2/\n      brush = d3.brush()\n        .extent([\n          [0, 0],\n          [width, height]\n        ])\n        .on(\"start\", function(d) {\n          node.each(function(d) {\n            d.previouslyPicked = brushMode && d.picked;\n          });\n        })\n        .on(\"brush\", function() {\n          if (!d3.event.selection) return;\n          var extent = d3.event.selection,\n            zoomProp = d3.zoomTransform(zoomLayer.node());\n          node.classed(\"picked\", function(d) {\n            return d.picked = d.previouslyPicked ^ ((extent[0][0] - zoomProp.x) / zoomProp.k <= d.x && d.x < (extent[1][0] - zoomProp.x) / zoomProp.k && (extent[0][1] - zoomProp.y) / zoomProp.k <= d.y && d.y < (extent[1][1] - zoomProp.y) /\n              zoomProp.k);\n          });\n        })\n        .on(\"end\", function() {\n          if (!d3.event.selection) return;\n          d3.select(this).call(d3.event.target.move, null);\n        })\n\n      var zoom = d3.zoom()\n        .scaleExtent([1 / 2, 4])\n        .on(\"zoom\", zoomed);\n\n      brushLayer = svg.append(\"g\")\n        .attr(\"id\", \"brush-layer\")\n        .attr(\"width\", width)\n        .attr(\"height\", height)\n        .style(\"fill\", \"none\")\n        .datum(function() {\n          return {\n            picked: false,\n            previouslyPicked: false\n          };\n        })\n        .call(brush)\n        .on(\"click\", function(d) {\n          node.classed(\"picked\", false);\n          node.each(function(d) {\n            d.picked = d.previouslyPicked = false;\n          })\n        });\n\n      zoomLayer = svg.append(\"rect\")\n        .attr(\"id\", \"zoom-layer\")\n        .attr(\"width\", width)\n        .attr(\"height\", height)\n        .style(\"fill\", \"none\")\n        .attr(\"pointer-events\", \"all\")\n        .call(zoom)\n\n      g = svg.append(\"g\");\n\n      let graph = this.graph\n\n      var lineScale = d3.scaleLinear()\n                      .range([1, 5])\n                      .domain(d3.extent(graph.links.map((d,i) => {return d.value})))\n\n      link = g.append(\"g\")\n        .attr(\"class\", \"links\")\n        .selectAll(\"line\")\n        .data(graph.links)\n        .enter().append(\"line\")\n        .attr(\"stroke-width\", function(d) {\n          return lineScale(d.value);\n        })\n\n      node = g.append(\"g\")\n        .attr(\"class\", \"nodes\")\n        .selectAll(\"circle\")\n        .data(graph.nodes)\n        .enter()\n        .append(\"circle\")\n        .attr(\"r\", (d,i) => {return 20})\n        .attr(\"fill\", \"#e49433\")\n        .on(\"click\", function() {\n          var thisNode = d3.select(this);\n          if (brushMode) {\n            node.each(function(d) {\n              d.previouslyPicked = brushMode && d.picked;\n            });\n            node.classed(\"picked\", function(d) {\n              return d.picked = d.previouslyPicked ^ (thisNode.datum().id === d.id);\n            });\n          }\n        })\n        .on(\"mouseover\", function(d, i, o) {\n          let currentd = d.id\n          var connectedNodeIds = graph\n            .links\n            .filter(x => x.source.id == d.id || x.target.id == d.id)\n            .map(x => x.source.id == d.id ? x.target.id : x.source.id)\n\n          d3.select(\".nodes\")\n            .selectAll(\"circle\")\n            .attr(\"fill\", function(c) {\n              if (connectedNodeIds.indexOf(c.id) > -1 || c.id == d.id) return \"red\";\n              else return '#e49433'\n            })\n\n          d3.select(\".links\")\n            .selectAll(\"line\")\n            .style(\"stroke\", function(d,c) {\n              if ((d.target.id === currentd && connectedNodeIds.indexOf(d.source.id) > -1) || (d.source.id === currentd && connectedNodeIds.indexOf(d.target.id) > -1)) {\n                return 'red'\n              } else {\n                return '#999'\n              }\n            })\n        })\n        .on(\"mouseout\", function(d) {\n          d3.select(\".nodes\")\n            .selectAll(\"circle\")\n            .attr(\"fill\", \"#e49433\");\n          d3.select(\".links\")\n            .selectAll(\"line\")\n            .style(\"stroke\", '#999')\n        })\n        .call(d3.drag()\n          .on(\"start\", dragstarted)\n          .on(\"drag\", dragged)\n          .on(\"end\", dragended));\n      //  text\n      let texts = g.selectAll(\".texts\")\n          .attr(\"class\", \"texts\")\n          .data(graph.nodes)\n          .enter()\n          .append(\"text\")\n          .text((d,i) => {return d.id})\n          .style(\"font-size\",\"8px\")\n          .attr(\"dy\", \".35em\")\n          .attr(\"text-anchor\", \"middle\")\n          .on(\"mouseover\", function(d, i, o) {\n            let currentd = d.id\n            var connectedNodeIds = graph\n              .links\n              .filter(x => x.source.id == d.id || x.target.id == d.id)\n              .map(x => x.source.id == d.id ? x.target.id : x.source.id);\n\n            d3.select(\".nodes\")\n              .selectAll(\"circle\")\n              .attr(\"fill\", function(c) {\n                if (connectedNodeIds.indexOf(c.id) > -1 || c.id == d.id) return \"red\";\n                else return '#e49433'\n              });\n            d3.select(\".links\")\n              .selectAll(\"line\")\n              .style(\"stroke\", function(d,c) {\n                if ((d.target.id === currentd && connectedNodeIds.indexOf(d.source.id) > -1) || (d.source.id === currentd && connectedNodeIds.indexOf(d.target.id) > -1)) {\n                  return 'red'\n                } else {\n                  return '#999'\n                }\n              });\n          })\n          .on(\"mouseout\", function(d) {\n            d3.select(\".nodes\")\n              .selectAll(\"circle\")\n              .attr(\"fill\", \"#e49433\");\n            d3.select(\".links\")\n              .selectAll(\"line\")\n              .style(\"stroke\", '#999')\n          })\n          .call(d3.drag()\n            .on(\"start\", dragstarted)\n            .on(\"drag\", dragged)\n            .on(\"end\", dragended));\n\n      simulation\n        .nodes(graph.nodes)\n        .on(\"tick\", ticked);\n\n      simulation.force(\"link\")\n        .links(graph.links)\n\n      function ticked() {\n        link\n          .attr(\"x1\", function(d) {\n            return d.source.x;\n          })\n          .attr(\"y1\", function(d) {\n            return d.source.y;\n          })\n          .attr(\"x2\", function(d) {\n            return d.target.x;\n          })\n          .attr(\"y2\", function(d) {\n            return d.target.y;\n          });\n\n        node\n          .attr(\"cx\", function(d) {\n            return d.x;\n          })\n          .attr(\"cy\", function(d) {\n            return d.y;\n          });\n\n        texts\n            .attr(\"transform\",(d)=>{\n              return \"translate(\"+d.x+\",\"+d.y+\")\"\n            })\n      }\n\n      function dragstarted(d) {\n        if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n        d.fx = d.x;\n        d.fy = d.y;\n      }\n\n      function dragged(d) {\n        d.fx = d3.event.x;\n        d.fy = d3.event.y;\n      }\n\n      function dragended(d) {\n        if (!d3.event.active) simulation.alphaTarget(0);\n        d.fx = null;\n        d.fy = null;\n      }\n\n      function keydown() {\n        var brushMode = d3.event.metaKey;\n        var cleanNodes = d3.event.keyCode === 68;\n        if (brushMode) zoomLayer.attr(\"pointer-events\", \"none\");\n        if (cleanNodes) cleanSelected();\n      }\n\n      function keyup() {\n        var brushMode = d3.event.metaKey;\n        if (!brushMode) zoomLayer.attr(\"pointer-events\", \"all\");\n      }\n\n      function zoomed() {\n        g.attr(\"transform\", d3.event.transform);\n      }\n\n      function cleanSelected() {\n        node.classed(\"picked\", false);\n        node.each(function(d) {\n          d.picked = d.previouslyPicked = false;\n        })\n      }\n    },\n  }\n}\n</script>\n\n<style scoped=\"true\">\n.content {\n  float: left;\n  /* width: 60%; */\n  width: calc(100% - 350px);\n  padding: 0 20px;\n  margin: 19px auto;\n}\n\n.cursor-pointer {\n  cursor: pointer;\n}\n</style>\n<style media=\"screen\">\n#zoom-layer:active {\n  cursor: move;\n}\n\n.links line {\n  stroke: #999;\n  stroke-opacity: 0.6;\n}\n\n.nodes circle {\n  stroke: #fff;\n  stroke-width: 1.5px;\n}\n\n.nodes circle.picked {\n  stroke: #202020;\n  stroke-width: 3px;\n  stroke-opacity: .6;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/forceGraph.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',{staticStyle:{\"height\":\"calc(100% - 62px)\",\"margin-top\":\"2px\"}},[_c('el-aside',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.$store.state.menuShow),expression:\"$store.state.menuShow\"}],staticStyle:{\"width\":\"300px\",\"height\":\"100%\",\"border-right\":\"1px solid #e6e6e6\"},attrs:{\"width\":\"350px;\"}},[_c('leftMenu',{staticStyle:{\"margin-top\":\"5px\"}})],1),_vm._v(\" \"),_c('el-main',[_c('imgMenuShowComp'),_vm._v(\" \"),_c('degComp'),_vm._v(\"\\n\\n    是否显示离散的基因：\\n    \"),_c('el-switch',{attrs:{\"active-color\":\"#409EFF\",\"active-text\":\"显示\",\"inactive-text\":\"隐藏\"},on:{\"change\":function($event){_vm.singleGeneShowChange()}},model:{value:(_vm.singleGeneShow),callback:function ($$v) {_vm.singleGeneShow=$$v},expression:\"singleGeneShow\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"canvas\"}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4172abba\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/forceGraph.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4172abba\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./forceGraph.vue\")\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4172abba\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=1!./forceGraph.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./forceGraph.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./forceGraph.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4172abba\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./forceGraph.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4172abba\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/forceGraph.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}