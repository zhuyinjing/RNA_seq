webpackJsonp([10],{JlFv:function(t,e,a){"use strict";(function(t){var r=a("Oj91"),o=a("f4AQ"),n=(a.n(o),a("nER5")),s=a.n(n);e.a={data:()=>({arr:[],temp:[],value:[],sortValue:[],idShow:!1,visible:"hidden",height:5}),components:{leftMenu:r.a},created(){this.$store.state.heatmapJson.heatmap_json_string=JSON.parse(this.$store.state.heatmapJson.heatmap_json_string);let t=this;for(let t in this.$store.state.heatmapJson.heatmap_json_string.data.nodes){let a=this.$store.state.heatmapJson.heatmap_json_string.data.nodes[t];"parent"in a==!1&&e(a)}function e(a){if(0===a.distance){t.temp.push(a.objects[0]);for(let e=0;e<a.features.length;e++)t.value.push(a.features[e]),t.sortValue.push(a.features[e])}else e(t.$store.state.heatmapJson.heatmap_json_string.data.nodes[a.left_child]),e(t.$store.state.heatmapJson.heatmap_json_string.data.nodes[a.right_child])}},mounted(){this.initchart()},methods:{initchart(){let e=this.$store.state.heatmapJson.stages,a=this.$store.state.heatmapJson.genes,r=this.$store.state.heatmapJson.heatmap_json_string;window.boxplot=new s.a.Chart({chart:{renderTo:"boxplot",type:"boxplot",height:400},credits:{enabled:!1},title:{text:"当前基因表达量"},legend:{enabled:!1},exporting:{enabled:!1},xAxis:{categories:e,title:{text:"Sample Types"}},yAxis:{title:{text:"Read Counts"}},plotOptions:{boxplot:{color:"#000000",fillColor:"#F0F0E0",lineWidth:2,medianColor:"#0C5DA5",medianWidth:3,stemColor:"#A63400",stemDashStyle:"dot",stemWidth:1,whiskerColor:"#3D9200",whiskerLength:"20%",whiskerWidth:3}},series:[{name:"Read Counts",data:[]}]});var o=t("#microarrays_dendrogram"),n=o.offset(),i=n.top+100,d=(n.left,t("#microarrays"));window.dendrogram=new InCHlib({target:"microarrays_dendrogram",metadata:!0,column_metadata:!0,min_row_height:5,max_column_width:50,max_height:5*a.length,heatmap_colors:"RdBkGr",metadata_colors:"RdLrBu",column_dendrogram:!0,max_percentile:90,min_percentile:10,independent_columns:!1});var l=null,h=[],m=[];function g(t,a,r){m=a;var n=dendrogram.header;if(0===m.length)for(g=0;g<n.length;g++)m.push(g);d.hide();for(var s={},l=0;l<e.length;++l)s[e[l]]=[];var h,g,p,_,u,f=i+o.height()-dendrogram.footer_height,v=dendrogram.column_metadata.features[0];for(r=(r=r+400>f?f-400:r-100)<i?i:r,d.css({top:r}),h=0;h<t.length;h++)for(_=dendrogram.objects2leaves[t[h]],p=dendrogram.data.nodes[_].features,boxplot.setTitle({text:dendrogram.data.nodes[_].objects[0]}),g=0;g<m.length;g++)s[v[u=m[g]]].push(p[u]);for(t.length>1&&boxplot.setTitle({text:"多个基因"});boxplot.series.length>0;)boxplot.series[0].remove(!0);for(var b=[],x=0;x<e.length;++x)s[e[x]]&&s[e[x]].length?b.push(c(s[e[x]])):b.push([0,0,0,0,0]);boxplot.addSeries({data:b,name:"Average Signal"},!0),d.show()}function c(t){var e,a,r,o,n;t.sort(function(t,e){return t-e});var s=t.length;e=t[0],a=t[s-1];var i=dendrogram._hack_round(s/2),d=dendrogram._hack_round(s/4);return r=t[i],o=t[i-d],n=t[i+d],t.length<4&&(n=a),[e,o,r,n,a]}dendrogram.events.row_onclick=function(t,e){l=t[0],g(h=t,m,e.pageY),dendrogram.highlight_rows(h),dendrogram.unhighlight_cluster()},dendrogram.events.dendrogram_node_onclick=function(t,e,a){var r;for(g(h=t,m,a.pageY),r=0;r<t.length;r++)if(t[r]==l)return;dendrogram.highlight_rows([])},dendrogram.events.column_dendrogram_node_highlight=function(t,e){g(h,t,0)},dendrogram.events.column_dendrogram_node_unhighlight=function(){g(h,m=[],0)},dendrogram.events.on_zoom=function(t){d.css({top:i})},dendrogram.events.empty_space_onclick=function(){dendrogram.highlight_rows([])},dendrogram.read_data(r),dendrogram.draw(),g(h,m,i),dendrogram.highlight_rows(h)},backHeatmapInput(){this.$router.push({name:"heatmap_input"})}}}}).call(e,a("7t+N"))},TsLl:function(t,e){},Yts5:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("JlFv"),o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("leftMenu",{staticStyle:{float:"left",width:"300px","margin-top":"10px"}}),t._v(" "),a("div",{staticClass:"content"},[a("el-breadcrumb",{staticStyle:{margin:"5px 0 50px 0"},attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"report"}}},[t._v("项目"+t._s(t.$store.state.projectName))]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"report_deg"}}},[t._v("差异表达基因")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"heatmap_input"}}},[t._v("绘制基因热图")]),t._v(" "),a("el-breadcrumb-item",[t._v("基因热图")])],1),t._v(" "),a("div",{staticClass:"container"},[a("h2",[t._v("基因差异表达热图 "+t._s(t.$store.state._case)+" vs "+t._s(t.$store.state._control)+" ")]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:16}},[a("div",{attrs:{id:"microarrays_dendrogram"}})]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"margin-top-200",attrs:{id:"microarrays"}},[a("div",{attrs:{id:"boxplot"}})])])],1)],1)],1)],1)},staticRenderFns:[]};var n=function(t){a("TsLl")},s=a("VU/8")(r.a,o,!1,n,"data-v-546fbbf6",null);e.default=s.exports}});
//# sourceMappingURL=10.be68580cbed5d4d34f7f.js.map