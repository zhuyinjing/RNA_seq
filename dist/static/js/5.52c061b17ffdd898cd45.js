webpackJsonp([5],{"/ZSq":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={data:()=>({loginBtnShow:!1,projectShow:!1,createProjectDialog:!1,projectList:null,form:{id:"",name:"",description:"",species:"Human (Homo sapiens)",type:"rnaseq"},speciesList:["homo_sapiens","ictidomys_tridecemlineatus","glycine_max"],typeList:["rnaseq"],deleteId:""}),components:{login:s("K31e").a},mounted(){this.$store.state.username?(this.loginBtnShow=!1,this.projectShow=!0,this.getProjects()):(this.loginBtnShow=!0,this.projectShow=!1)},methods:{getProjects(){this.axios.get("/server/projects?username="+this.$store.state.username).then(e=>{this.projectList=e.data.projects;for(let e in this.projectList)this.projectList[e].openTime=this.projectList[e].openTime.split("T")[0]+" "+this.projectList[e].openTime.split("T")[1].split(".")[0]})},login(){window.location.href="https://colorseq.com/login"},createClick(){if(!this.form.name)return void this.$message.error("项目名不能为空!");let e=new FormData;e.append("username",this.$store.state.username),e.append("name",this.form.name),e.append("description",this.form.description),e.append("speciesId",this.$store.state.speciesArr[this.form.species]),e.append("type",this.form.type),this.axios.post("/server/create_project",e).then(e=>{"success"===e.data.message_type?this.getProjects():this.$message.error("请求错误!"),this.form.name="",this.form.description="",this.createProjectDialog=!1})},deleteProject(e){this.deleteId=e,this.$confirm("确认删除该项目吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(()=>{let e=new FormData;e.append("username",this.$store.state.username),e.append("p",this.deleteId),this.axios.post("/server/delete_project",e).then(e=>{"success"===e.data.message_type?(this.$message({type:"success",message:"删除成功!",duration:1e3}),this.getProjects()):this.$message({type:"error",message:"删除失败!",duration:1e3})})}).catch(()=>{})},createExperiment(e){this.commitStore(e),this.$router.push({name:"create_experiment"})},upload(e){this.commitStore(e),this.$router.push({name:"upload_file"})},runTask(e){this.commitStore(e),this.$router.push({name:"run_task"})},report(e){this.commitStore(e),this.axios.get("/server/rnaseq_report_index?username="+this.$store.state.username+"&p="+this.$store.state.projectId).then(e=>{null===e.data.experimentDesign&&null===e.data.rnaSeqReportSummary||this.$store.commit("setinfo",e.data)}),this.$router.push({name:"report"})},commitStore(e){this.$store.commit("setprojectName",e.name),this.$store.commit("setprojectId",e.id),this.$store.commit("setspecies",e.speciesInfoEntity.id)}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{},[e.loginBtnShow?s("div",{staticClass:"textStyle"},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"text item"},[e._v("\n        请先登录后再查看！\n      ")]),e._v(" "),s("el-button",{attrs:{type:"danger"},on:{click:function(t){e.login()}}},[e._v("登录")])],1)],1):e._e(),e._v(" "),e.projectShow?s("div",{staticClass:"min-width-div"},[s("div",{staticClass:"createbtn"},[s("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.createProjectDialog=!0}}},[e._v("+ 新建项目")])],1),e._v(" "),s("div",{staticClass:"tableDiv"},e._l(e.projectList,function(t){return s("div",{staticClass:"table-item"},[s("div",{staticClass:"titleDiv"},[e._v("\n          项目名称："+e._s(t.name)+" 创建时间："+e._s(t.openTime)+"\n        ")]),e._v(" "),s("div",{staticClass:"btnDiv"},[s("el-button",{on:{click:function(s){e.createExperiment(t)}}},[e._v("查看/编辑 实验设计"),s("i",{staticClass:"el-icon-menu el-icon--right"})]),e._v(" "),s("el-button",{on:{click:function(s){e.upload(t)}}},[e._v("上传测序文件"),s("i",{staticClass:"el-icon-upload el-icon--right"})]),e._v(" "),s("el-button",{on:{click:function(s){e.runTask(t)}}},[e._v("运行分析"),s("i",{staticClass:"el-icon-caret-right el-icon--right"})]),e._v(" "),s("el-button",{on:{click:function(s){e.report(t)}}},[e._v("查看报告"),s("i",{staticClass:"el-icon-document el-icon--right"})]),e._v(" "),s("el-button",{staticClass:"float-right",attrs:{disabled:"",type:"danger"},on:{click:function(s){e.deleteProject(t.id)}}},[e._v("删除项目"),s("i",{staticClass:"el-icon-delete el-icon--right"})])],1)])}))]):e._e(),e._v(" "),s("login",{ref:"loginDiv"}),e._v(" "),s("el-dialog",{attrs:{title:"新建项目",visible:e.createProjectDialog,width:"30%"},on:{"update:visible":function(t){e.createProjectDialog=t}}},[s("el-form",{attrs:{model:e.form}},[s("el-form-item",{attrs:{label:"项目名称"}},[s("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"项目简介"}},[s("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),s("div",{staticClass:"margin-bottom-10"},[s("label",{attrs:{for:""}},[e._v("物种类型")])]),e._v(" "),s("el-select",{attrs:{placeholder:"物种类型"},model:{value:e.form.species,callback:function(t){e.$set(e.form,"species",t)},expression:"form.species"}},e._l(e.$store.state.speciesArr,function(t,o){return s("el-option",{key:o,attrs:{value:o}},[e._v(e._s(o))])})),e._v(" "),s("div",{staticClass:"selectDiv"},[s("label",{attrs:{for:""}},[e._v("测序类型")])]),e._v(" "),s("el-select",{attrs:{placeholder:"物种类型"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.typeList,function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.createProjectDialog=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.createClick()}}},[e._v("新建")])],1)],1)],1)},staticRenderFns:[]};var i=s("VU/8")(o,r,!1,function(e){s("KAeB")},"data-v-446f629b",null);t.default=i.exports},BvP8:function(e,t){},K31e:function(e,t,s){"use strict";var o=s("J56h"),r={data:()=>({registerDialog:!1,form:{username:"",password:"",surepassword:""},formLabelWidth:"120px"}),components:{navbar:o.a},mounted(){},methods:{register(){if(this.form.username)if(this.form.password)if(this.form.surepassword){let e=new FormData;e.append("username",this.form.username),e.append("password",this.form.password),this.axios.post("/server/login",e).then(e=>{})}else this.$message.error("确认密码不能为空!");else this.$message.error("密码不能为空!");else this.$message.error("用户名不能为空!");this.registerDialog=!1}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{title:"注 册",visible:e.registerDialog,width:"400px"},on:{"update:visible":function(t){e.registerDialog=t}}},[s("el-form",{attrs:{model:e.form}},[s("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth}},[s("el-input",{attrs:{type:"text","auto-complete":"off",clearable:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth}},[s("el-input",{attrs:{type:"password","auto-complete":"off",clearable:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"确认密码","label-width":e.formLabelWidth}},[s("el-input",{attrs:{type:"password","auto-complete":"off",clearable:""},model:{value:e.form.surepassword,callback:function(t){e.$set(e.form,"surepassword",t)},expression:"form.surepassword"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.registerDialog=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.register()}}},[e._v("注 册")])],1)],1)],1)},staticRenderFns:[]};var a=s("VU/8")(r,i,!1,function(e){s("oP2r")},"data-v-10459b44",null).exports,n={data:()=>({loginDialog:!1,form:{username:"",password:""},formLabelWidth:"60px"}),components:{navbar:o.a,register:a},mounted(){},methods:{login(){if(this.form.username)if(this.form.password){let e=new FormData;e.append("username",this.form.username),this.axios.post("/server/login",e).then(e=>{})}else this.$message.error("密码不能为空!");else this.$message.error("用户名不能为空!")},register(){this.$refs.registerDiv.registerDialog=!0,setTimeout(()=>{this.loginDialog=!1},0)}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{title:"登 录",visible:e.loginDialog,width:"400px"},on:{"update:visible":function(t){e.loginDialog=t}}},[s("el-form",{attrs:{model:e.form}},[s("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth}},[s("el-input",{attrs:{type:"text","auto-complete":"off",clearable:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth}},[s("el-input",{attrs:{type:"password","auto-complete":"off",clearable:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),e._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("span",[e._v("没有账号？")]),e._v(" "),s("el-button",{attrs:{type:"text"},on:{click:function(t){e.register()}}},[e._v("注 册")])],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.loginDialog=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.login()}}},[e._v("登 录")])],1)],1),e._v(" "),s("register",{ref:"registerDiv"})],1)},staticRenderFns:[]};var c=s("VU/8")(n,l,!1,function(e){s("BvP8")},"data-v-617c90b1",null);t.a=c.exports},KAeB:function(e,t){},oP2r:function(e,t){}});
//# sourceMappingURL=5.52c061b17ffdd898cd45.js.map