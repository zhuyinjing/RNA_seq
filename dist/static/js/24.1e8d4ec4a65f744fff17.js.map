{"version":3,"sources":["webpack:///src/components/ASprofile.vue","webpack:///./src/components/ASprofile.vue?6291","webpack:///./src/components/ASprofile.vue"],"names":["ASprofile","data","events","samples","eventsArr","samplesArr","components","leftMenu","imgMenuShowComp","[object Object]","this","getValue","methods","axios","get","$store","state","username","projectId","then","res","message_type","ASProfileInfo","asName","sampleName","asEventMap","forEach","value","key","push","initD3","$message","error","length","d3","remove","margin","tooltip","append","style","text","i","svg","attr","arr","filter","includes","xData","x","domain","rangeRound","padding","y","color","selectAll","enter","d","j","bandwidth","on","event","pageY","pageX","call","components_ASprofile","render","_vm","_h","$createElement","_c","_self","staticStyle","height","margin-top","directives","name","rawName","expression","width","border-right","attrs","_v","separator","to","path","_s","projectName","min-width","for","multiple","placeholder","model","callback","$$v","_l","item","label","type","click","$event","id","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/24.1e8d4ec4a65f744fff17.js","sourcesContent":["<template>\n<el-container style=\"height:calc(100% - 62px);margin-top:2px\">\n  <el-aside v-show=\"$store.state.menuShow\" width=\"350px;\" style=\"width:300px;height:100%;border-right:1px solid #e6e6e6\">\n    <leftMenu style=\"margin-top:5px\"></leftMenu>\n  </el-aside>\n  <el-main>\n    <div class=\"\">\n      <imgMenuShowComp></imgMenuShowComp>\n\n      <el-breadcrumb separator=\"/\" style=\"margin:5px 0 50px 0\">\n        <el-breadcrumb-item :to=\"{ path: 'report' }\">项目 {{$store.state.projectName}}</el-breadcrumb-item>\n        <el-breadcrumb-item>可变剪切事件数量统计</el-breadcrumb-item>\n      </el-breadcrumb>\n\n      <h2>可变剪切事件数量统计</h2>\n\n      <div class=\"\" style=\"min-width:1100px\">\n        <label for=\"\">可变剪切事件</label>\n        <el-select v-model=\"events\" multiple placeholder=\"请选择\" style=\"width:400px;\">\n          <el-option\n            v-for=\"item in eventsArr\"\n            :key=\"item\"\n            :label=\"item\"\n            :value=\"item\">\n          </el-option>\n        </el-select>\n        &nbsp;&nbsp;&nbsp;&nbsp;\n        <label for=\"\">样本</label>\n        <el-select v-model=\"samples\" multiple placeholder=\"请选择\" style=\"width:400px;\">\n          <el-option\n            v-for=\"(item,key) in samplesArr\"\n            :key=\"item\"\n            :label=\"item\"\n            :value=\"key\">\n          </el-option>\n        </el-select>\n        &nbsp;&nbsp;&nbsp;&nbsp;\n        <el-button type=\"primary\" @click=\"initD3()\">提交</el-button>\n      </div>\n\n      <div id=\"canvas\"></div>\n\n    </div>\n  </el-main>\n</el-container>\n</template>\n\n<script>\nimport leftMenu from './leftMenu.vue'\nimport imgMenuShowComp from './imgMenuShowComp.vue'\nimport * as d3 from 'd3'\n\nexport default {\n  data() {\n    return {\n      events: [],\n      samples: [],\n      eventsArr: [],\n      samplesArr: [],\n      data: {},\n    }\n  },\n  components: {\n    leftMenu,\n    imgMenuShowComp\n  },\n  mounted() {\n    this.getValue()\n  },\n  methods: {\n    getValue () {\n      this.axios.get('/server/as_profile_info?username=' + this.$store.state.username + '&p=' + this.$store.state.projectId).then((res) => {\n        if (res.data.message_type === 'success') {\n          this.eventsArr = res.data.ASProfileInfo.asName\n          this.samplesArr = res.data.ASProfileInfo.sampleName\n          this.data = res.data.ASProfileInfo.asEventMap\n          // 默认全选\n          this.events = res.data.ASProfileInfo.asName\n          // 存索引\n          this.samplesArr.forEach((value, key) => {\n            this.samples.push(key)\n          })\n          this.initD3()\n        } else {\n          this.$message.error('请求错误!')\n        }\n      })\n    },\n    initD3() {\n      if (this.events.length === 0 || this.samples.length === 0 ) {\n        this.$message.error('请选择可变剪切事件和样本，不能为空！')\n        return\n      }\n      let hassvg = d3.selectAll('svg')\n      if (hassvg) {\n        d3.selectAll('svg').remove()\n      }\n      let width = 800\n      let height = 400\n      let margin = {left: 100, right: 30, top: 30, bottom: 80}\n\n      let tooltip = d3.select('body')\n      \t.append('div')\n      \t.style('position', 'absolute')\n        .style('z-index', '10')\n        .style('visibility', 'hidden')\n        .style('font-size', '14px')\n      \t.style('font-weight', 'bold')\n      \t.text('')\n\n      for (let i = 0;i < this.events.length;i++) {\n        let svg = d3.select('#canvas')\n          .append('svg')\n          .attr('id', 'svg')\n          .attr('width', width)\n          .attr('height', height)\n\n        let arr = this.data[this.events[i]].filter((value, key) => {\n            if (this.samples.includes(key)) {\n                return value\n            }\n        })\n\n        let xData = this.samplesArr.filter((value, key) => {\n            if (this.samples.includes(key)) {\n                return value\n            }\n        })\n        var x = d3.scaleBand()\n          .domain(xData)\n          .rangeRound([margin.left, width - margin.right])\n          .padding(0.5)\n\n        var y = d3.scaleLinear()\n          .domain([0, d3.max(arr)])\n          .rangeRound([height - margin.bottom, margin.top]);\n\n        var color = d3.scaleOrdinal(d3.schemeCategory10);\n\n        svg.append(\"g\")\n          .selectAll(\"g\")\n          .data(arr)\n          .enter().append(\"g\")\n          .attr(\"fill\", (d, j) => {\n            return color(i)\n          })\n          .selectAll(\"rect\")\n          .data(arr)\n          .enter().append(\"rect\")\n          .attr(\"width\", x.bandwidth)\n          .attr(\"x\", (d, i) => {\n            return x(xData[i])\n          })\n          .attr(\"y\", (d) => {\n            return y(d)\n          })\n          .attr(\"height\", (d) => {\n            return y(0) - y(d)\n          })\n          .on('mouseover', (d, i) => {\n            return tooltip.style('visibility', 'visible').text(d)\n          })\n          .on('mousemove', function (d, i) {\n            return tooltip.style('top', (event.pageY-10)+'px').style('left',(event.pageX+10)+'px')\n          })\n          .on('mouseout', function (d, i) {\n            return tooltip.style('visibility', 'hidden')\n          })\n\n        svg.append(\"g\")\n          .attr(\"transform\", \"translate(0,\" + y(0) + \")\")\n          .call(d3.axisBottom(x))\n          .selectAll(\"text\")\n          .style(\"text-anchor\", \"start\")\n          .attr(\"transform\", \"rotate(45 -10 10)\");\n\n        svg.append(\"g\")\n          .attr(\"transform\", \"translate(\" + margin.left + \",0)\")\n          .call(d3.axisLeft(y))\n          .append('text')\n          .text(this.events[i])\n          .style(\"font-size\", \"16px\")\n          .attr('fill', '#000')\n          .attr('transform', 'translate(' + 0 + ', 25)')\n      }\n\n    },\n  }\n}\n</script>\n\n<style scoped=\"true\">\n.content {\n  float: left;\n  width: calc(100% - 350px);\n  padding: 0 20px;\n  margin: 19px auto;\n}\n\n.cursor-pointer {\n  cursor: pointer;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/ASprofile.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',{staticStyle:{\"height\":\"calc(100% - 62px)\",\"margin-top\":\"2px\"}},[_c('el-aside',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.$store.state.menuShow),expression:\"$store.state.menuShow\"}],staticStyle:{\"width\":\"300px\",\"height\":\"100%\",\"border-right\":\"1px solid #e6e6e6\"},attrs:{\"width\":\"350px;\"}},[_c('leftMenu',{staticStyle:{\"margin-top\":\"5px\"}})],1),_vm._v(\" \"),_c('el-main',[_c('div',{},[_c('imgMenuShowComp'),_vm._v(\" \"),_c('el-breadcrumb',{staticStyle:{\"margin\":\"5px 0 50px 0\"},attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: 'report' }}},[_vm._v(\"项目 \"+_vm._s(_vm.$store.state.projectName))]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"可变剪切事件数量统计\")])],1),_vm._v(\" \"),_c('h2',[_vm._v(\"可变剪切事件数量统计\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"min-width\":\"1100px\"}},[_c('label',{attrs:{\"for\":\"\"}},[_vm._v(\"可变剪切事件\")]),_vm._v(\" \"),_c('el-select',{staticStyle:{\"width\":\"400px\"},attrs:{\"multiple\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.events),callback:function ($$v) {_vm.events=$$v},expression:\"events\"}},_vm._l((_vm.eventsArr),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})})),_vm._v(\"\\n            \\n        \"),_c('label',{attrs:{\"for\":\"\"}},[_vm._v(\"样本\")]),_vm._v(\" \"),_c('el-select',{staticStyle:{\"width\":\"400px\"},attrs:{\"multiple\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.samples),callback:function ($$v) {_vm.samples=$$v},expression:\"samples\"}},_vm._l((_vm.samplesArr),function(item,key){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":key}})})),_vm._v(\"\\n            \\n        \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.initD3()}}},[_vm._v(\"提交\")])],1),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"canvas\"}})],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3608bd70\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ASprofile.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3608bd70\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ASprofile.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ASprofile.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ASprofile.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3608bd70\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ASprofile.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3608bd70\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ASprofile.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}