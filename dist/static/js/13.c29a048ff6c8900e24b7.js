webpackJsonp([13],{"/Djd":function(t,e){},"84ho":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:()=>({inputVisible:!1,inputValue:"",optionProject:["RNASeq"],project:"RNASeq",row_distance:"euclidean",row_linkage:"ward",column_distance:"euclidean",column_linkage:"ward",loading:null,timer:null}),components:{leftMenu:s("Oj91").a},mounted(){},destroyed(){window.clearInterval(this.timer)},methods:{submit(){let t=[];for(let e=0;e<this.$store.state.geneList.length;e++)t.push(this.$store.state.geneList[e].target_id);t=t.join(",");let e=new FormData;e.append("username",this.$store.state.username),e.append("p",this.$store.state.projectId),e.append("genelist",t),this.loading=this.$loading({lock:!0,text:"文件正在生成中...请稍等...可能需要等待1～2分钟左右的时间...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),this.axios.post("/server/enrich_do",e).then(t=>{"success"===t.data.message_type&&this.getStatus()})},getStatus(){this.timer=setInterval(()=>{this.axios.get("/server/enrich_do_status?username="+this.$store.state.username+"&p="+this.$store.state.projectId).then(t=>{"success"===t.data.message_type&&(this.loading.close(),this.$message.success("富集分析已完成!"),window.clearInterval(this.timer),this.$router.push({name:"enrichment_analysis"}))})},1e3)},handleClose(t){this.$store.state.geneList.splice(this.$store.state.geneList.indexOf(t),1)},showInput(){this.inputVisible=!0,this.$nextTick(t=>{this.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm(){let t={};this.inputValue&&(t.target_id=this.inputValue,this.$store.state.geneList.push(t)),this.inputVisible=!1,this.inputValue=""}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{},[s("leftMenu",{staticStyle:{float:"left",width:"300px","margin-top":"10px"}}),t._v(" "),s("div",{staticClass:"content"},[s("el-breadcrumb",{staticStyle:{margin:"5px 0 50px 0"},attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:{path:"report"}}},[t._v("项目"+t._s(t.$store.state.projectName))]),t._v(" "),s("el-breadcrumb-item",{attrs:{to:{path:"report_deg"}}},[t._v("差异表达基因")]),t._v(" "),s("el-breadcrumb-item",[t._v("富集分析")])],1),t._v(" "),s("h2",[t._v("富集分析 "+t._s(t.$store.state._case)+" vs "+t._s(t.$store.state._control)+" ")]),t._v(" "),s("table",{staticClass:"min-width-div"},[s("tr",[s("td",[t._v("基因列表")]),t._v(" "),s("td",[s("div",{staticClass:"tagsDiv"},t._l(t.$store.state.geneList,function(e){return s("div",{staticClass:"tag"},[s("span",[t._v(t._s(e.target_id))]),t._v(" "),s("span",{staticClass:"margin-left-20"},[t._v(t._s(e.name))]),t._v(" "),s("i",{staticClass:"el-icon-close cursor-pointer delete-icon",on:{click:function(s){t.handleClose(e)}}})])}))])]),t._v(" "),s("tr",[s("td",[t._v("新增基因")]),t._v(" "),s("td",[t.inputVisible?s("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleInputConfirm(e):null}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):s("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ New Gene")])],1)]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td",[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submit()}}},[t._v("提交")])],1)])])],1)],1)},staticRenderFns:[]};var a=s("VU/8")(i,n,!1,function(t){s("/Djd")},"data-v-535fb750",null);e.default=a.exports}});
//# sourceMappingURL=13.c29a048ff6c8900e24b7.js.map