{"version":3,"sources":["webpack:///src/components/report_mappingqc.vue","webpack:///./src/components/report_mappingqc.vue?7c71","webpack:///./src/components/report_mappingqc.vue"],"names":["report_mappingqc","data","traces","tableData","barChartArr","xData","components","leftMenu","imgMenuShowComp","[object Object]","this","initTable","methods","self","tooltip","d3","append","style","text","containerWidth","document","getElementById","clientWidth","margin","width","height","g","attr","x0","rangeRound","paddingInner","x1","padding","y","z","keys","map","d","domain","bandwidth","key","nice","selectAll","enter","name","value","$store","state","info","experimentDesign","nameSampleMap","on","i","numFormat","event","pageY","pageX","call","ticks","pop","conditionArr","k","conditionNumMap","push","legend","num","arr","toString","split","reverse","res","len","length","join","concat","axios","get","username","projectId","then","slice","index","temp","j","indextemp","initD3","components_report_mappingqc","render","_vm","_h","$createElement","_c","_self","staticStyle","margin-top","directives","rawName","expression","border-right","attrs","_v","separator","to","path","_s","projectName","href","id","staticClass","_l","item","class","bgcolor","Number","toFixed","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/25.2aa4f749f27ae78f2604.js","sourcesContent":["<template>\n<el-container style=\"height:calc(100% - 62px);margin-top:2px\">\n  <el-aside v-show=\"$store.state.menuShow\" width=\"350px;\" style=\"width:300px;height:100%;border-right:1px solid #e6e6e6\">\n    <leftMenu style=\"margin-top:5px\"></leftMenu>\n  </el-aside>\n  <el-main>\n    <div class=\"\">\n      <imgMenuShowComp></imgMenuShowComp>\n\n      <el-breadcrumb separator=\"/\" style=\"margin:5px 0 50px 0\">\n        <el-breadcrumb-item :to=\"{ path: 'report' }\">项目 {{$store.state.projectName}}</el-breadcrumb-item>\n        <el-breadcrumb-item>比对结果质检</el-breadcrumb-item>\n      </el-breadcrumb>\n\n      <h2>序列比对结果统计图</h2>\n\n      <p>转录本由基因外显子序列组成，因此转录组测序产生的 reads 理论上应主要回贴到基因外显子（包括 UTR ）区域；同时由于可变剪切事件的存在，部分 reads 会回贴到基因内含子区域；另外可能有少量 reads 会回帖到基因间区。对 reads 基因组回贴位置进行统计，可以辅助判断转录组的测序质量。 我们使用 Hisat2 软件进行基因组回帖比对分析，该软件是是 TopHat2/Bowtie2 的后续更新版本，使用改进的 BWT 算法，实现了更快的速度和更少的资源占用，作者推荐 TopHat2/Bowtie2\n        和 HISAT 的用户转换到 HISAT2 。</p>\n      <p>参考文献：</p>\n\n      <p>Kim D, Langmead B and Salzberg SL. HISAT: a fast spliced aligner with low memory requirements. Nature Methods 2015 </p>\n      <p>[<a href=\"https://www.nature.com/articles/nmeth.3317\">原文链接</a>]</p>\n\n      <p>如下图所示，横坐标表示各类 reads 回贴位置，纵坐标表示每个细胞中回贴到相应位置的 reads 的数目（纵坐标轴上大写的 G 代表 Billion）。</p>\n\n      <div id=\"metrics_bar\"></div>\n\n      <div class=\"\">\n        <div id=\"container\">\n          <svg id=\"chart\"></svg>\n        </div>\n\n        <!-- <div class=\"\" style=\"float:left;width:200px;height:200px;overflow-y:auto;overflow-x:hidden\">\n          <svg id=\"legend\"></svg>\n        </div> -->\n      </div>\n\n      <table class=\"gridtable\">\n        <thead>\n          <tr>\n            <th>样本</th>\n            <th>总碱基数</th>\n            <th>核糖体占比</th>\n            <th>编码区占比</th>\n            <th>UTR占比</th>\n            <th>内含子区占比</th>\n            <th>基因间区占比</th>\n          </tr>\n        </thead>\n        <tr v-for=\"(item, index) in tableData\">\n          <td :class=\"{'bgcolor': index % 2 === 0 ? false: true}\">{{item[0]}}</td>\n          <td :class=\"{'bgcolor': index % 2 === 0 ? false: true}\">{{numFormat(item[1])}}</td>\n          <td :class=\"{'bgcolor': index % 2 === 0 ? false: true}\">{{(Number(item[16])* 100).toFixed(1)}}%</td>\n          <td :class=\"{'bgcolor': index % 2 === 0 ? false: true}\">{{(Number(item[17])* 100).toFixed(1)}}%</td>\n          <td :class=\"{'bgcolor': index % 2 === 0 ? false: true}\">{{(Number(item[18])* 100).toFixed(1)}}%</td>\n          <td :class=\"{'bgcolor': index % 2 === 0 ? false: true}\">{{(Number(item[19])* 100).toFixed(1)}}%</td>\n          <td :class=\"{'bgcolor': index % 2 === 0 ? false: true}\">{{(Number(item[20])* 100).toFixed(1)}}%</td>\n        </tr>\n      </table>\n\n    </div>\n    <div class=\"clear\"></div>\n  </el-main>\n</el-container>\n</template>\n\n<script>\nimport leftMenu from './leftMenu.vue'\nimport imgMenuShowComp from './imgMenuShowComp.vue'\nimport * as d3 from 'd3'\n\nexport default {\n  data() {\n    return {\n      traces: [],\n      tableData: [],\n      barChartArr: [],\n      xData: ['总碱基数', '核糖体碱基数', '编码区碱基数', 'UTR碱基数', '内含子碱基数', '基因间区碱基数'],\n    }\n  },\n  components: {\n    leftMenu,\n    imgMenuShowComp\n  },\n  mounted() {\n    this.initTable()\n  },\n  methods: {\n    initD3() {\n      let self = this\n      let tooltip = d3.select('body')\n      \t.append('div')\n      \t.style('position', 'absolute')\n        .style('z-index', '10')\n        .style('visibility', 'hidden')\n        .style('font-size', '14px')\n        .style('font-weight', 'bold')\n      \t.text('')\n      let containerWidth = document.getElementById(\"container\").clientWidth\n      var svg = d3.select(\"#chart\")\n          .attr(\"width\", containerWidth)\n          .attr(\"height\", 560)\n      var margin = {\n          top: 20,\n          right: 50,\n          bottom: 30,\n          left: 40\n        },\n        width = containerWidth - 80 - margin.left - margin.right,\n        height = 560 - margin.top - margin.bottom,\n        g = svg.append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n      var x0 = d3.scaleBand()\n        .rangeRound([0, width])\n        .paddingInner(0.05)\n\n      var x1 = d3.scaleBand()\n        .padding(0.05);\n\n      var y = d3.scaleLinear()\n        .rangeRound([height, 0]);\n\n      var z = d3.scaleOrdinal(d3.schemeCategory10);\n\n      var keys = this.tableData.map((d) => {\n        return d[0]\n      })\n\n      x0.domain(this.xData);\n      x1.domain(keys).rangeRound([0, x0.bandwidth()]);\n      y.domain([0, d3.max(this.barChartArr, function(d) {\n        return d3.max(keys, function(key) {\n          return d[key];\n        });\n      })]).nice();\n\n      // x 轴的 group\n      let xgroups = g.append(\"g\")\n        .selectAll(\"g\")\n        .data(this.barChartArr)\n        .enter().append(\"g\")\n        .attr(\"transform\", function(d) {\n          return \"translate(\" + x0(d.name) + \",0)\";\n        })\n        .selectAll(\"rect\")\n        .data(function(d) {\n          return keys.map(function(key) {\n            return {\n              key: key,\n              value: d[key]\n            };\n          });\n        })\n        // 每个 x 轴的 条形图 group\n        .enter().append(\"rect\")\n        .attr(\"x\", function(d) {\n          // let node = this.parentNode\n          // let data = d3.select(node).data()\n          // console.log(x0(data[0].name));\n          return x1(d.key);\n        })\n        .attr(\"y\", function(d) {\n          return y(d.value);\n        })\n        .attr(\"width\", x1.bandwidth())\n        .attr(\"height\", function(d) {\n          return height - y(d.value);\n        })\n        .attr(\"fill\", function(d) {\n          return z(self.$store.state.info.experimentDesign.nameSampleMap[d.key]['condition']);\n        })\n        .on('mouseover', function (d, i) {\n          return tooltip.style('visibility', 'visible').text(d.key + ' : ' + self.numFormat(d.value))\n        })\n        .on('mousemove', function (d, i) {\n          return tooltip.style('top', (event.pageY-10)+'px').style('left',(event.pageX+10)+'px')\n        })\n        .on('mouseout', function (d, i) {\n          return tooltip.style('visibility', 'hidden')\n        })\n\n      g.append(\"g\")\n        .attr(\"class\", \"axis\")\n        .attr(\"transform\", \"translate(0,\" + height + \")\")\n        .call(d3.axisBottom(x0));\n      g.append(\"g\")\n        .attr(\"class\", \"axis\")\n        .call(d3.axisLeft(y).ticks(null, \"s\"))\n        .append(\"text\")\n        .attr(\"x\", 2)\n        .attr(\"y\", y(y.ticks().pop()) + 0.5)\n        .attr(\"dy\", \"0.32em\")\n        .attr(\"fill\", \"#000\")\n        .attr(\"font-weight\", \"bold\")\n        .attr(\"text-anchor\", \"start\")\n\n      // var legend = g.append(\"g\")\n      //   .attr(\"font-family\", \"sans-serif\")\n      //   .attr(\"font-size\", 10)\n      //   .attr(\"text-anchor\", \"end\")\n      //   .selectAll(\"g\")\n      //   .data(keys.slice().reverse())\n      //   .enter().append(\"g\")\n      //   .attr(\"transform\", function(d, i) {\n      //     return \"translate(0,\" + i * 20 + \")\";\n      //   });\n      //\n      // legend.append(\"rect\")\n      //   .attr(\"x\", width - 19)\n      //   .attr(\"width\", 19)\n      //   .attr(\"height\", 19)\n      //   .attr(\"fill\", z);\n      //\n      // legend.append(\"text\")\n      //   .attr(\"x\", width - 24)\n      //   .attr(\"y\", 9.5)\n      //   .attr(\"dy\", \"0.32em\")\n      //   .text(function(d) {\n      //     return d;\n      //   });\n      let conditionArr = []\n      for (let k in this.$store.state.info.experimentDesign.conditionNumMap) {\n        conditionArr.push(k)\n      }\n      var legend = g.append(\"g\")\n        .attr(\"font-size\", 10)\n        .selectAll(\"g\")\n        .data(conditionArr)\n        .enter().append(\"g\")\n        .attr(\"transform\", function(d, i) {\n          return \"translate(0,\" + i * 16 + \")\";\n        });\n\n      legend.append(\"rect\")\n        .attr(\"x\", width)\n        .attr(\"width\", 15)\n        .attr(\"height\", 15)\n        .attr(\"fill\", z);\n\n      legend.append(\"text\")\n        .attr(\"x\", width + 16)\n        .attr(\"y\", 8)\n        .attr(\"dy\", \"0.32em\")\n        .text(function(d) {\n          return d;\n        });\n\n\n//     test test test  testtet\n        // var legend = d3.select(\"#legend\")\n        //   .attr(\"width\", 200)\n        //   .attr(\"height\", 900)\n        //   .append(\"g\")\n        //   .attr(\"font-family\", \"sans-serif\")\n        //   .attr(\"font-size\", 10)\n        //   .attr(\"text-anchor\", \"start\")\n        //   .selectAll(\"g\")\n        //   .data(keys.slice().reverse())\n        //   .enter().append(\"g\")\n        //   .attr(\"transform\", function(d, i) {\n        //     return \"translate(0,\" + i * 20 + \")\";\n        //   });\n        //\n        // legend.append(\"rect\")\n        //   .attr(\"x\", 0)\n        //   // .attr(\"y\", 0)\n        //   .attr(\"width\", 19)\n        //   .attr(\"height\", 19)\n        //   .attr(\"fill\", z);\n        //\n        // legend.append(\"text\")\n        //   .attr(\"x\", 20)\n        //   .attr(\"y\", 9.5)\n        //   .attr(\"dy\", \"0.32em\")\n        //   .text(function(d) {\n        //     return d;\n        //   });\n\n    },\n    numFormat(num) {\n      num = num.toString().split(\".\"); // 分隔小数点\n      var arr = num[0].split(\"\").reverse(); // 转换成字符数组并且倒序排列\n      var res = [];\n      for (var i = 0, len = arr.length; i < len; i++) {\n        if (i % 3 === 0 && i !== 0) {\n          res.push(\",\"); // 添加分隔符\n        }\n        res.push(arr[i]);\n      }\n      res.reverse(); // 再次倒序成为正确的顺序\n      if (num[1]) { // 如果有小数的话添加小数部分\n        res = res.join(\"\").concat(\".\" + num[1]);\n      } else {\n        res = res.join(\"\");\n      }\n      return res;\n    },\n    initTable() {\n      this.axios.get('/server/mappingqc?username=' + this.$store.state.username + '&p=' + this.$store.state.projectId).then((res) => {\n        this.tableData = res.data.slice(1)\n        // 格式化 d3 group bar chart 需要的数据\n        let index = [1, 3, 4, 5, 6, 7]\n        for (let i = 0; i < this.xData.length; i++) {\n          let temp = {\n            name: this.xData[i]\n          }\n          for (let j = 0; j < this.tableData.length; j++) {\n            for (let k = 0; k < this.tableData.length; k++) {\n              let indextemp = index[i]\n              temp[this.tableData[k][0]] = this.tableData[k][indextemp] - 0\n            }\n          }\n          this.barChartArr.push(temp)\n        }\n        this.initD3()\n      })\n    },\n  }\n}\n</script>\n\n<style scoped=\"true\">\n.content {\n  float: left;\n  /* width: 60%; */\n  width: calc(100% - 350px);\n  padding: 0 20px;\n  margin: 19px auto;\n}\n\n.cursor-pointer {\n  cursor: pointer;\n}\n\ntable.gridtable {\n  width: 100%;\n  text-align: center;\n  font-size: 14px;\n  color: #333333;\n  border-width: 1px;\n  border-color: #ebeef5;\n  border-collapse: collapse;\n}\n\ntable.gridtable th {\n  color: #333;\n  border-width: 1px;\n  padding: 8px;\n  border-style: solid;\n  border-color: #ebeef5;\n}\n\ntable.gridtable td {\n  border-width: 1px;\n  padding: 8px;\n  border-style: solid;\n  border-color: #ebeef5;\n  background-color: #ffffff;\n}\n\n.bgcolor {\n  background-color: #f9f9f9 !important;\n}\n\n.clear {\n  clear: both;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/report_mappingqc.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',{staticStyle:{\"height\":\"calc(100% - 62px)\",\"margin-top\":\"2px\"}},[_c('el-aside',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.$store.state.menuShow),expression:\"$store.state.menuShow\"}],staticStyle:{\"width\":\"300px\",\"height\":\"100%\",\"border-right\":\"1px solid #e6e6e6\"},attrs:{\"width\":\"350px;\"}},[_c('leftMenu',{staticStyle:{\"margin-top\":\"5px\"}})],1),_vm._v(\" \"),_c('el-main',[_c('div',{},[_c('imgMenuShowComp'),_vm._v(\" \"),_c('el-breadcrumb',{staticStyle:{\"margin\":\"5px 0 50px 0\"},attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: 'report' }}},[_vm._v(\"项目 \"+_vm._s(_vm.$store.state.projectName))]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"比对结果质检\")])],1),_vm._v(\" \"),_c('h2',[_vm._v(\"序列比对结果统计图\")]),_vm._v(\" \"),_c('p',[_vm._v(\"转录本由基因外显子序列组成，因此转录组测序产生的 reads 理论上应主要回贴到基因外显子（包括 UTR ）区域；同时由于可变剪切事件的存在，部分 reads 会回贴到基因内含子区域；另外可能有少量 reads 会回帖到基因间区。对 reads 基因组回贴位置进行统计，可以辅助判断转录组的测序质量。 我们使用 Hisat2 软件进行基因组回帖比对分析，该软件是是 TopHat2/Bowtie2 的后续更新版本，使用改进的 BWT 算法，实现了更快的速度和更少的资源占用，作者推荐 TopHat2/Bowtie2\\n        和 HISAT 的用户转换到 HISAT2 。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"参考文献：\")]),_vm._v(\" \"),_c('p',[_vm._v(\"Kim D, Langmead B and Salzberg SL. HISAT: a fast spliced aligner with low memory requirements. Nature Methods 2015 \")]),_vm._v(\" \"),_c('p',[_vm._v(\"[\"),_c('a',{attrs:{\"href\":\"https://www.nature.com/articles/nmeth.3317\"}},[_vm._v(\"原文链接\")]),_vm._v(\"]\")]),_vm._v(\" \"),_c('p',[_vm._v(\"如下图所示，横坐标表示各类 reads 回贴位置，纵坐标表示每个细胞中回贴到相应位置的 reads 的数目（纵坐标轴上大写的 G 代表 Billion）。\")]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"metrics_bar\"}}),_vm._v(\" \"),_c('div',{},[_c('div',{attrs:{\"id\":\"container\"}},[_c('svg',{attrs:{\"id\":\"chart\"}})])]),_vm._v(\" \"),_c('table',{staticClass:\"gridtable\"},[_c('thead',[_c('tr',[_c('th',[_vm._v(\"样本\")]),_vm._v(\" \"),_c('th',[_vm._v(\"总碱基数\")]),_vm._v(\" \"),_c('th',[_vm._v(\"核糖体占比\")]),_vm._v(\" \"),_c('th',[_vm._v(\"编码区占比\")]),_vm._v(\" \"),_c('th',[_vm._v(\"UTR占比\")]),_vm._v(\" \"),_c('th',[_vm._v(\"内含子区占比\")]),_vm._v(\" \"),_c('th',[_vm._v(\"基因间区占比\")])])]),_vm._v(\" \"),_vm._l((_vm.tableData),function(item,index){return _c('tr',[_c('td',{class:{'bgcolor': index % 2 === 0 ? false: true}},[_vm._v(_vm._s(item[0]))]),_vm._v(\" \"),_c('td',{class:{'bgcolor': index % 2 === 0 ? false: true}},[_vm._v(_vm._s(_vm.numFormat(item[1])))]),_vm._v(\" \"),_c('td',{class:{'bgcolor': index % 2 === 0 ? false: true}},[_vm._v(_vm._s((Number(item[16])* 100).toFixed(1))+\"%\")]),_vm._v(\" \"),_c('td',{class:{'bgcolor': index % 2 === 0 ? false: true}},[_vm._v(_vm._s((Number(item[17])* 100).toFixed(1))+\"%\")]),_vm._v(\" \"),_c('td',{class:{'bgcolor': index % 2 === 0 ? false: true}},[_vm._v(_vm._s((Number(item[18])* 100).toFixed(1))+\"%\")]),_vm._v(\" \"),_c('td',{class:{'bgcolor': index % 2 === 0 ? false: true}},[_vm._v(_vm._s((Number(item[19])* 100).toFixed(1))+\"%\")]),_vm._v(\" \"),_c('td',{class:{'bgcolor': index % 2 === 0 ? false: true}},[_vm._v(_vm._s((Number(item[20])* 100).toFixed(1))+\"%\")])])})],2)],1),_vm._v(\" \"),_c('div',{staticClass:\"clear\"})])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3231d722\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/report_mappingqc.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3231d722\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./report_mappingqc.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./report_mappingqc.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./report_mappingqc.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3231d722\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./report_mappingqc.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3231d722\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/report_mappingqc.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}