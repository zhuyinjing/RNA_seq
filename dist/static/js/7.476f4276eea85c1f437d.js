webpackJsonp([7],{lm1M:function(t,e){},rR1x:function(t,e){},rwf8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Oj91"),n=a("f4AQ"),i={data:()=>({xData:[],yData:[],tableValue:[]}),components:{leftMenu:r.a},mounted(){this.axios.get("/server/enrich_bubble_diagram?username="+this.$store.state.username+"&p="+this.$store.state.projectId+"&fileType=KEGG").then(t=>{this.xData=t.data.x,this.yData=t.data.y,this.tableValue=t.data.coordinateList,this.initD3()})},methods:{initD3(){let t=this;var e=400,a=40,r=200,i=20,l=800-e-i,o=800-a-i,s=n.select(".container").append("svg").attr("class","test").attr("width",l).attr("height",o).style("padding-left",e).style("padding-right",r).style("padding-top",a).style("padding-bottom",i);let u=t.yData,c=n.scaleBand().rangeRound([o,0]).padding(1).domain(u.map(function(t){return t.y})),d=n.axisLeft(c);s.append("g").attr("class","yaxis").attr("transform","translate(0,0)").call(d).style("font-size","14px"),s.selectAll(".tick text").on("click",function(){});let p=t.xData,x=n.scaleBand().rangeRound([0,l]).padding(1).domain(p.map(function(t){return t})),f=n.axisBottom(x);s.append("g").attr("class","xaxis").attr("transform","translate(0 ,"+o+")").call(f).style("font-size","14px"),n.selectAll(".domain").remove(),s.append("g").attr("class","grid").attr("transform","translate(0,"+o+")").call(n.axisBottom(x).ticks(4).tickSize(-o).tickFormat("")),s.append("g").attr("class","grid").call(n.axisLeft(c).ticks(4).tickSize(-l).tickFormat(""));var m=n.scaleLinear().domain([n.min(t.tableValue,function(t){return Number(t.p_value)}),n.max(t.tableValue,function(t){return Number(t.p_value)})]).range(["red","blue"]),y=n.scaleLinear().domain([n.min(t.tableValue,function(t){return t.gene_ratio}),n.max(t.tableValue,function(t){return t.gene_ratio})]).range([10,20]),g=s.append("g");g.selectAll("circle").data(t.tableValue).enter().append("circle").attr("cx",function(t){return x(t.x)}).attr("cy",function(t){return c(t.y)}).attr("r",function(t){return y(t.gene_ratio)}).attr("fill",function(t){return m(Number(t.p_value))}).on("mouseover",function(t){let e=this;n.select(this).transition().duration(100).attr("r",1.6*n.select(this).attr("r")),b.attr("x",function(){return x(t.x)}).attr("y",function(){return c(t.y)-1.6*n.select(e).attr("r")-5}).text(function(){return Number(t.p_value).toFixed(3)+" , "+t.gene_ratio.toFixed(3)}).attr("text-anchor","middle").attr("fill","#666")}).on("mouseout",function(){n.select(this).transition().duration(100).attr("r",n.select(this).attr("r")/1.6),b.text("")});g.append("g");let b=s.append("text").text("").attr("font-size","14px");var h=s.append("defs").append("linearGradient").attr("id","linearColor").attr("x1","0%").attr("y1","100%").attr("x2","0%").attr("y2","0%");h.append("stop").attr("offset","0%").style("stop-color","red"),h.append("stop").attr("offset","100%").style("stop-color","blue"),s.append("rect").attr("x",l+50).attr("y",o/1.5).attr("width",40).attr("height",100).style("fill","url(#"+h.attr("id")+")"),s.append("text").attr("class","valueText").attr("x",l+120).attr("y",o-232).attr("dy","-0.3em").text(function(){return n.min(t.tableValue,function(t){return t.gene_ratio.toFixed(3)})}),s.append("text").attr("class","valueText").attr("x",l+120).attr("y",o-140).attr("dy","-0.3em").text(function(){return n.max(t.tableValue,function(t){return t.gene_ratio.toFixed(3)})}),s.append("text").attr("class","valueText").attr("x",l+50).attr("y",o/1.5-10).attr("dy","-0.3em").text(function(){return"pvalue"}),s.append("rect").attr("x",l+50).attr("y",130).attr("width",40).attr("height",40).attr("fill","white").attr("stroke","#999");s.append("circle").attr("cx",l+50+20).attr("cy",150).attr("r",y(n.min(t.tableValue,function(t){return Number(t.gene_ratio)}))).attr("fill","black"),s.append("text").attr("class","valueText").attr("x",l+50).attr("y",120).attr("dy","-0.3em").text(function(){return"GeneRatio"}),s.append("text").attr("class","valueText").attr("x",l+100).attr("y",160).attr("dy","-0.3em").text(function(){return n.min(t.tableValue,function(t){return Number(t.gene_ratio)}).toFixed(3)});s.append("rect").attr("x",l+50).attr("y",170).attr("width",40).attr("height",40).attr("fill","white").attr("stroke","#999");s.append("circle").attr("cx",l+50+20).attr("cy",190).attr("r",y(n.max(t.tableValue,function(t){return Number(t.gene_ratio)}))).attr("fill","black"),s.append("text").attr("class","valueText").attr("x",l+100).attr("y",200).attr("dy","-0.3em").text(function(){return n.max(t.tableValue,function(t){return Number(t.gene_ratio)}).toFixed(3)})}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("leftMenu",{staticStyle:{float:"left",width:"300px","margin-top":"10px"}}),t._v(" "),a("div",{staticClass:"content"},[a("el-breadcrumb",{staticStyle:{margin:"5px 0 50px 0"},attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"report"}}},[t._v("项目 "+t._s(t.$store.state.projectName))]),t._v(" "),a("el-breadcrumb-item",[t._v("KEGG 气泡图")])],1),t._v(" "),a("h2",[t._v("KEGG 气泡图 ")]),t._v(" "),a("div",{staticClass:"container"}),t._v(" "),a("a",{ref:"aTag",attrs:{href:"www.baidu.com",target:"_blank"}})],1)],1)},staticRenderFns:[]};var o=a("VU/8")(i,l,!1,function(t){a("rR1x"),a("lm1M")},"data-v-40a6180c",null);e.default=o.exports}});
//# sourceMappingURL=7.476f4276eea85c1f437d.js.map